<!DOCTYPE html>
<html lang="th">

<head>
  <base target="_top">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π | ‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà üßÅ‚òïÔ∏è (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GitHub Pages)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    /* ======= ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á ====== */
    body {
      font-family: 'Sarabun', sans-serif;
      background: linear-gradient(to bottom, #e6f5e6, #d9edda);
      color: #3e2723;
      padding: 20px;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
      background-size: 400px;
      opacity: 0.1;
      z-index: 0;
      pointer-events: none;
    }

    .card {
      border: none;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(5px);
      border: 1px solid #d1c7b7;
    }

    .card-header {
      background: linear-gradient(90deg, #8bc34a, #689f38) !important;
      color: white !important;
      font-weight: 600;
      border-top-left-radius: 12px !important;
      border-top-right-radius: 12px !important;
    }

    .order-type-header {
      background: linear-gradient(90deg, #5d4037, #8d6e63) !important;
      color: white !important;
    }

    .menu-item {
      background: #fff;
      border: 1px solid #d7ccc8;
      margin-bottom: 8px;
      border-radius: 10px;
      padding: 12px 15px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      transition: all 0.2s ease;
      cursor: pointer; /* Make it clear it's clickable */
    }

    .menu-item:hover {
      background: #f1f8e9;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    /* ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ô‡∏ß‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á */
    .btn-outline-primary {
      color: #5d4037;
      border-color: #5d4037;
    }

    .btn-outline-primary:hover,
    .btn-outline-primary.active {
      background-color: #5d4037;
      color: white;
      border-color: #5d4037;
    }

    /* Dark Mode ‡πÅ‡∏ô‡∏ß‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á */
    body.dark-mode {
      background-color: #1a2a1a;
      background-image:
        url('https://www.transparenttextures.com/patterns/dark-wood.png'),
        url('https://www.transparenttextures.com/patterns/stardust.png');
      color: #e0e7eb;
    }

    body.dark-mode .card {
      background: rgba(40, 50, 40, 0.9);
      border-color: #5d4037;
    }

    body.dark-mode .menu-item {
      background: rgba(50, 60, 50, 0.8);
      border-color: #5d4037;
      color: #e0e7eb;
    }

    body.dark-mode .menu-item:hover {
      background: rgba(70, 80, 70, 0.6);
    }

    body.dark-mode .table-bordered thead th,
    body.dark-mode .table-bordered tbody,
    body.dark-mode .table-bordered tfoot {
      color: #e0e7eb;
    }

    /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÑ‡∏ü‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå */
    .campfire-effect {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, rgba(255, 165, 0, 0.6) 0%, rgba(255, 69, 0, 0.3) 50%, transparent 70%);
      border-radius: 50%;
      filter: blur(5px);
      z-index: 0;
      animation: flicker 3s infinite alternate;
    }

    @keyframes flicker {
      0%,
      100% {
        opacity: 0.8;
        transform: translateX(-50%) scale(1);
      }

      25% {
        opacity: 0.9;
        transform: translateX(-50%) scale(1.05);
      }

      50% {
        opacity: 0.7;
        transform: translateX(-50%) scale(0.95);
      }

      75% {
        opacity: 0.85;
        transform: translateX(-50%) scale(1.03);
      }
    }

    /* Language toggle positioning */
    .language-toggle-buttons {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 10; /* Ensure it's above other elements */
    }

    #themeToggle {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 10;
    }

    #categoryFilter button {
        margin-right: 5px;
        margin-bottom: 5px;
    }
  </style>
</head>

<body>
  <button id="themeToggle" class="btn btn-light">
    <i class="bi bi-moon-stars-fill"></i>
  </button>

  <div class="language-toggle-buttons">
    <button class="btn btn-outline-secondary btn-sm" onclick="switchLanguage('th')">üáπüá≠</button>
    <button class="btn btn-outline-secondary btn-sm" onclick="switchLanguage('en')">üá¨üáß</button>
  </div>
  <div class="campfire-effect"></div>

  <div class="container-fluid">
    <div class="row mb-4">
      <div class="col-12">
        <h2 class="text-center" id="appTitle">‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π | ‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà üßÅ‚òïÔ∏è</h2>
        <div class="text-center text-muted" id="current-time"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-5">
        <div class="card mb-3">
          <div class="card-header"><h4 class="mb-0" id="menuHeader">‡πÄ‡∏°‡∏ô‡∏π</h4></div>
          <div class="card-body">
            <div id="categoryFilter" class="mb-3">
              <button class="btn btn-sm btn-outline-primary category-btn active" data-category="all"></button>
              <button class="btn btn-sm btn-outline-primary category-btn" data-category="drink"></button>
              <div id="subCategoryDrink" class="d-none mt-2">
                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="coffee"></button>
                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="tea"></button>
                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="juice"></button>
                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="otherDrink"></button>
                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="alcohol"></button>
              </div>
              <button class="btn btn-sm btn-outline-primary category-btn" data-category="food"></button>
              <button class="btn btn-sm btn-outline-primary category-btn" data-category="dessert"></button>
              <div id="subCategoryDessert" class="d-none mt-2">
                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="cakesBakeries"></button>
                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="otherDessert"></button>
              </div>
              <button class="btn btn-sm btn-outline-primary category-btn" data-category="mainDish"></button>
              <div id="subCategoryMainDish" class="d-none mt-2">
                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="pizza"></button>
                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="spaghetti"></button>
                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="steak"></button>
                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="thaiFood"></button>
              </div>
            </div>
            <div id="menuList" class="list-group"></div>
          </div>
        </div>
      </div>

      <div class="col-md-7">
        <div class="card mb-3">
          <div class="card-header"><h4 class="mb-0" id="orderListHeader">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h4></div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered table-striped" id="orderTable">
                <thead class="table-dark">
                  <tr>
                    <th id="colMenuName">‡πÄ‡∏°‡∏ô‡∏π</th>
                    <th id="colPrice">‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                    <th id="colQty">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                    <th id="colTotal">‡∏£‡∏ß‡∏°</th>
                    <th id="colManage">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                  </tr>
                </thead>
                <tbody></tbody>
                <tfoot>
                  <tr>
                    <th colspan="3" class="text-end" id="totalAmountLabel">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</th>
                    <th id="totalAmount">0</th>
                    <th></th>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header order-type-header d-flex align-items-center justify-content-center">
            <h4 class="mb-0" id="orderTypeHeader">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h4>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <label class="form-label" id="orderTypeLabel"><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</strong></label>
              <div class="form-check d-flex align-items-center mb-2">
                <input class="form-check-input me-2" type="radio" name="orderType" id="eatHere" value="eatHere" checked>
                <label class="form-check-label fs-5" for="eatHere" id="eatHereLabel">
                  ‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô <span class="fs-4">üçΩÔ∏è</span>
                </label>
              </div>
              <div class="form-check d-flex align-items-center">
                <input class="form-check-input me-2" type="radio" name="orderType" id="takeHome" value="takeHome">
                <label class="form-check-label fs-5" for="takeHome" id="takeHomeLabel">
                  ‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô <span class="fs-4">üõçÔ∏è</span>
                </label>
              </div>
              <div id="tableSelectContainer" class="mt-3">
                <label for="tableNumber" class="form-label d-flex align-items-center fs-5" id="tableSelectLabel">
                  ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞ <span class="fs-4 ms-2">ü™ë</span>
                </label>
                <select class="form-select form-select-lg" id="tableNumber">
                  <option value="table1">‡πÇ‡∏ï‡πä‡∏∞ 1</option>
                  <option value="table2">‡πÇ‡∏ï‡πä‡∏∞ 2</option>
                  <option value="table3">‡πÇ‡∏ï‡πä‡∏∞ 3</option>
                  <option value="table4">‡πÇ‡∏ï‡πä‡∏∞ 4</option>
                </select>
              </div>
            </div>
            <div class="mt-3 d-flex justify-content-between">
              <button class="btn btn-danger" id="clearOrderBtn"><i class="bi bi-trash"></i> ‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
              <button class="btn btn-primary" id="sendOrderBtn"><i class="bi bi-send-check"></i> ‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
            </div>
            <div id="statusMsg" class="mt-3 alert" style="display:none;"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="receiptModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="receiptModalTitle">‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body" id="receiptContent">
          <h6 class="text-center" id="cafeNameReceipt">‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π | ‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà üè†</h6>
          <div id="receiptDetails"></div>
          <div id="receiptTable"></div>
          <div class="text-center mt-3"><img id="qrImage" src="" width="150" /></div>
        </div>
        <div class="modal-footer">
          <button onclick="printReceipt()" class="btn btn-outline-secondary" id="printReceiptBtn"><i
              class="bi bi-printer"></i> ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal" id="closeModalBtn">‡∏õ‡∏¥‡∏î</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const translations = {
      "th": {
        "appTitle": "‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà üèïÔ∏è‚òï",
        "cafeNameReceipt": "‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà üèïÔ∏è",
        "menuHeader": "‡πÄ‡∏°‡∏ô‡∏π",
        "orderListHeader": "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠",
        "allCategory": "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚ú®",
        "drinkCategory": "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏° ‚òïÔ∏è",
        "foodCategory": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ü•™",
        "dessertCategory": "‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô üç∞",
        "mainDishCategory": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å üçΩÔ∏è",
        "coffeeSubCategory": "‡∏Å‡∏≤‡πÅ‡∏ü ‚òï",
        "teaSubCategory": "‡∏ä‡∏≤ üçµ",
        "juiceSubCategory": "‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ ü•§",
        "otherDrinkSubCategory": "‡∏≠‡∏∑‡πà‡∏ô‡πÜ üçπ",
        "alcoholSubCategory": "‡πÄ‡∏´‡∏•‡πâ‡∏≤-‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå üçª",
        "pizzaSubCategory": "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤ üçï",
        "spaghettiSubCategory": "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ üçù",
        "steakSubCategory": "‡∏™‡πÄ‡∏ï‡πá‡∏Å ü•©",
        "thaiFoodSubCategory": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢ üçö",
        "cakesBakeriesSubCategory": "‡πÄ‡∏Ñ‡πâ‡∏Å & ‡πÄ‡∏ö‡πÄ‡∏Å‡∏≠‡∏£‡∏µ‡πà üßÅ",
        "otherDessertSubCategory": "‡∏≠‡∏∑‡πà‡∏ô‡πÜ üç¨",
        "menuNameCol": "‡πÄ‡∏°‡∏ô‡∏π",
        "priceCol": "‡∏£‡∏≤‡∏Ñ‡∏≤",
        "qtyCol": "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",
        "totalCol": "‡∏£‡∏ß‡∏°",
        "manageCol": "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£",
        "grandTotal": "‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",
        "orderTypeLabel": "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå",
        "eatHere": "‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô",
        "takeHome": "‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô",
        "tableSelectLabel": "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞",
        "clearOrderBtn": "‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",
        "sendOrderBtn": "‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå",
        "modalReceiptTitle": "‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",
        "cafeNameReceiptHeader": "‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π | ‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà üè†", // Use a specific key for the header
        "receiptType": "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó",
        "receiptTable": "‡πÇ‡∏ï‡πä‡∏∞",
        "printReceiptBtn": "‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à",
        "closeBtn": "‡∏õ‡∏¥‡∏î",
        "addToOrderSuccess": "‡πÄ‡∏û‡∏¥‡πà‡∏° {itemName} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",
        "removeFromOrderSuccess": "‡∏•‡∏ö {itemName} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",
        "noItemsSelected": "‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",
        "sendingOrder": "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...",
        "orderSuccess": "‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ",
        "orderFailed": "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: {errorMessage}",
        "clearOrderConfirm": "‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?",
        "orderCleared": "‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",
        "noMenuInCategory": "‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ",
        "‡∏ö‡∏≤‡∏ó": "‡∏ö‡∏≤‡∏ó",
        "table1": "‡πÇ‡∏ï‡πä‡∏∞ 1",
        "table2": "‡πÇ‡∏ï‡πä‡∏∞ 2",
        "table3": "‡πÇ‡∏ï‡πä‡∏∞ 3",
        "table4": "‡πÇ‡∏ï‡πä‡∏∞ 4",
        "orderReceipt": "‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",
        "thankYou": "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£!",
        "item": "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",
        "qty": "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",
        "total": "‡∏£‡∏ß‡∏°",
        "grandTotalReceipt": "‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥",
        "receiptOrderType": "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå",
        "receiptTableNumber": "‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ï‡πä‡∏∞",
        "game": "‡πÄ‡∏Å‡∏°" // Translation for "Game"
      },
      "en": {
        "appTitle": "Teacher's Home / Cafe üßÅ‚òïÔ∏è",
        "cafeNameReceipt": "Camp Cafe üèïÔ∏è",
        "menuHeader": "Menu",
        "orderListHeader": "Order List",
        "allCategory": "All ‚ú®",
        "drinkCategory": "Drinks ‚òïÔ∏è",
        "foodCategory": "Food ü•™",
        "dessertCategory": "Desserts üç∞",
        "mainDishCategory": "Main Dishes üçΩÔ∏è",
        "coffeeSubCategory": "Coffee ‚òï",
        "teaSubCategory": "Tea üçµ",
        "juiceSubCategory": "Juices ü•§",
        "otherDrinkSubCategory": "Others üçπ",
        "alcoholSubCategory": "Alcohol & Beer üçª",
        "pizzaSubCategory": "Pizza üçï",
        "spaghettiSubCategory": "Spaghetti üçù",
        "steakSubCategory": "Steak ü•©",
        "thaiFoodSubCategory": "Thai Food üçö",
        "cakesBakeriesSubCategory": "Cakes & Bakeries üßÅ",
        "otherDessertSubCategory": "Others üç¨",
        "menuNameCol": "Menu",
        "priceCol": "Price",
        "qtyCol": "Quantity",
        "totalCol": "Total",
        "manageCol": "Manage",
        "grandTotal": "Grand Total",
        "orderTypeLabel": "Order Type",
        "eatHere": "Eat Here",
        "takeHome": "Take Home",
        "tableSelectLabel": "Select Table",
        "clearOrderBtn": "Clear Order",
        "sendOrderBtn": "Send Order",
        "modalReceiptTitle": "Receipt",
        "cafeNameReceiptHeader": "Teacher's Home Cafe üè†", // Specific key for header
        "receiptType": "Type",
        "receiptTable": "Table",
        "printReceiptBtn": "Print Receipt",
        "closeBtn": "Close",
        "addToOrderSuccess": "Added {itemName} to order",
        "removeFromOrderSuccess": "Removed {itemName} from order",
        "noItemsSelected": "Please select at least 1 item",
        "sendingOrder": "Sending order...",
        "orderSuccess": "Order sent successfully üéâ",
        "orderFailed": "Error: {errorMessage}",
        "clearOrderConfirm": "Clear all items?",
        "orderCleared": "Order cleared",
        "noMenuInCategory": "No menu in this category",
        "‡∏ö‡∏≤‡∏ó": "Baht",
        "table1": "Table 1",
        "table2": "Table 2",
        "table3": "Table 3",
        "table4": "Table 4",
        "orderReceipt": "Order Receipt",
        "thankYou": "Thank you for your order!",
        "item": "Item",
        "qty": "Qty",
        "total": "Total",
        "grandTotalReceipt": "Grand Total",
        "receiptOrderType": "Order Type",
        "receiptTableNumber": "Table Number",
        "game": "Game" // Translation for "Game"
      }
    };


    let currentLang = 'th';
    let currentActiveCategory = 'all';
    let currentActiveSubCategory = 'all';

    const menuItems = [
      { id: 999, name: "Pizza Maker WOI (‡πÄ‡∏Å‡∏°‡∏ó‡∏≥‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤)", price: 0, category: "pizza", icon: "üéÆ", isGame: true, gameUrl: "https://th.crazygames.com/%E0%B9%80%E0%B8%81%E0%B8%A1/pizza-maker-woi" },
      // ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏° (Drinks)
      { id: 1, name: "‡∏Å‡∏≤‡πÅ‡∏ü‡∏•‡∏≤‡πÄ‡∏ï‡πâ", price: 40, category: "coffee", icon: "‚òïÔ∏è" },
      { id: 42, name: "‡∏Ñ‡∏≤‡∏õ‡∏π‡∏ä‡∏¥‡πÇ‡∏ô‡πà‡∏Ñ‡∏•‡∏≤‡∏™‡∏™‡∏¥‡∏Å (Classic Cappuccino)", price: 50, category: "coffee", icon: "‚òï" },
      { id: 44, name: "‡πÄ‡∏≠‡∏™‡πÄ‡∏õ‡∏£‡∏™‡πÇ‡∏ã‡πà‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå‡∏ï‡∏£‡πâ‡∏≤ (Espresso Extra)", price: 40, category: "coffee", icon: "‚òï" },
      { id: 46, name: "‡∏Å‡∏≤‡πÅ‡∏ü‡∏ô‡∏°‡∏™‡∏î (Fresh Milk Coffee)", price: 45, category: "coffee", icon: "ü•õ" },
      { id: 41, name: "‡∏°‡πá‡∏≠‡∏Ñ‡∏Ñ‡πà‡∏≤‡πÅ‡∏°‡πá‡∏Å‡∏ã‡πå (Mocha Max)", price: 60, category: "coffee", icon: "‚òï" },
      { id: 40, name: "‡∏•‡∏≤‡πÄ‡∏ï‡πâ‡∏•‡∏≤‡πÄ‡∏ß‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå (Lavender Latte)", price: 55, category: "coffee", icon: "üíú" },

      { id: 2, name: "‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß", price: 35, category: "tea", icon: "üçµ" },
      { id: 43, name: "‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏°‡∏±‡∏ó‡∏â‡∏∞ (Matcha Green Tea)", price: 45, category: "tea", icon: "üçµ" },
      { id: 45, name: "‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏¢‡πá‡∏ô (Thai Iced Tea)", price: 40, category: "tea", icon: "üßã" },
      { id: 7, name: "‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢", price: 35, category: "tea", icon: "üßã" },
      { id: 47, name: "‡∏Æ‡∏±‡∏ô‡∏ô‡∏µ‡πà‡πÄ‡∏•‡∏°‡∏≠‡∏ô‡∏ó‡∏µ (Honey Lemon Tea)", price: 35, category: "tea", icon: "üçã" },
      { id: 48, name: "‡∏ä‡∏≤‡∏≠‡∏π‡πà‡∏´‡∏•‡∏á‡∏£‡πâ‡∏≠‡∏ô (Hot Oolong Tea)", price: 30, category: "tea", icon: "üçµ" },

      { id: 4, name: "‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°‡∏Ñ‡∏±‡πâ‡∏ô", price: 30, category: "juice", icon: "ü•§" },
      { id: 39, name: "‡πÇ‡∏Å‡πÇ‡∏Å‡πâ‡∏Ñ‡∏£‡∏µ‡∏°‡∏°‡∏µ‡πà (Cocoa Creamy)", price: 45, category: "otherDrink", icon: "üç´" },

      // **‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π ‡πÄ‡∏´‡∏•‡πâ‡∏≤-‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå**
      { id: 78, name: "‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡∏ä‡πâ‡∏≤‡∏á", price: 90, category: "alcohol", icon: "üç∫" },
      { id: 79, name: "‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡∏•‡∏µ‡πÇ‡∏≠", price: 90, category: "alcohol", icon: "üç∫" },
      { id: 80, name: "‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡∏™‡∏¥‡∏á‡∏´‡πå", price: 100, category: "alcohol", icon: "üç∫" },
      { id: 81, name: "‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡πÑ‡∏Æ‡πÄ‡∏ô‡πÄ‡∏Å‡πâ‡∏ô", price: 120, category: "alcohol", icon: "üç∫" },
      { id: 82, name: "‡∏ß‡∏¥‡∏™‡∏Å‡∏µ‡πâ (‡πÅ‡∏Å‡πâ‡∏ß)", price: 150, category: "alcohol", icon: "ü•É" },
      { id: 83, name: "‡πÄ‡∏´‡∏•‡πâ‡∏≤‡∏Ç‡∏≤‡∏ß (‡∏ä‡πá‡∏≠‡∏ï)", price: 60, category: "alcohol", icon: "üç∂" },
      { id: 84, name: "‡∏Ñ‡πá‡∏≠‡∏Å‡πÄ‡∏ó‡∏• ‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß (Coconut Cocktail)", price: 180, category: "alcohol", icon: "üçπ" },

      // ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Food) (singleDish category in this context seems to be "Food" as a main category)
      { id: 5, name: "‡πÅ‡∏ã‡∏ô‡∏ß‡∏¥‡∏ä", price: 45, category: "singleDish", icon: "ü•™" },
      { id: 8, name: "‡∏Ñ‡∏£‡∏±‡∏ß‡∏ã‡∏≠‡∏á‡∏ï‡πå", price: 40, category: "singleDish", icon: "ü•ê" },

      // ‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô (Desserts)
      { id: 3, name: "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏ä‡πá‡∏≠‡∏Å‡πÇ‡∏Å‡πÅ‡∏•‡∏ï", price: 55, category: "cakesBakeries", icon: "üßÅ" },
      { id: 6, name: "‡∏ö‡∏£‡∏≤‡∏ß‡∏ô‡∏µ‡πà", price: 50, category: "cakesBakeries", icon: "üç´" },
      { id: 24, name: "‡∏ö‡πâ‡∏≤‡∏ô‡∏Ç‡∏ô‡∏°‡∏´‡∏ß‡∏≤‡∏ô Sweet Home Bakery", price: 65, category: "cakesBakeries", icon: "üç∞" },
      { id: 25, name: "‡∏Ç‡∏ô‡∏°‡∏≠‡∏ö‡∏£‡∏±‡∏Å Love Bake", price: 70, category: "cakesBakeries", icon: "üíñ" },
      { id: 26, name: "‡∏Ñ‡∏£‡∏±‡∏ß‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô Warm Oven", price: 60, category: "cakesBakeries", icon: "üç™" },
      { id: 27, name: "‡∏´‡∏≠‡∏°‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏Ç‡∏ô‡∏° Aroma Bakery", price: 75, category: "cakesBakeries", icon: "üçû" },
      { id: 28, name: "‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏≠‡∏ö‡∏≠‡∏ß‡∏• Cozy Crust", price: 68, category: "cakesBakeries", icon: "ü•®" },
      { id: 29, name: "‡∏Ç‡∏ô‡∏°‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏ß‡∏ô Garden Sweets", price: 55, category: "cakesBakeries", icon: "üå≥" },
      { id: 30, name: "‡∏Ç‡∏ô‡∏°‡∏´‡∏ß‡∏≤‡∏ô‡πÉ‡∏à Sweetheart Treats", price: 72, category: "cakesBakeries", icon: "üç¨" },
      { id: 31, name: "‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå‡∏Ç‡∏ô‡∏° Heaven Bakery", price: 80, category: "cakesBakeries", icon: "üòá" },
      { id: 32, name: "‡πÄ‡∏ï‡∏≤‡∏≠‡∏ö‡∏™‡∏∏‡∏Ç‡πÉ‡∏à Happy Oven", price: 62, category: "cakesBakeries", icon: "üòä" },
      { id: 33, name: "‡∏Ç‡∏ô‡∏°‡∏°‡∏á‡∏Ñ‡∏• Lucky Bakes", price: 78, category: "cakesBakeries", icon: "üßß" },
      { id: 34, name: "‡∏Ç‡∏ô‡∏°‡∏≠‡∏ö‡∏™‡∏î Fresh Bake", price: 58, category: "cakesBakeries", icon: "ü•ñ" },
      { id: 35, name: "‡∏≠‡∏ö‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô Warm & Fresh", price: 60, category: "cakesBakeries", icon: "ü•ê" },
      { id: 36, name: "‡∏´‡∏≠‡∏°‡∏Å‡∏£‡∏∏‡πà‡∏ô‡∏Ç‡∏ô‡∏° Fragrant Sweets", price: 65, category: "cakesBakeries", icon: "üç©" },
      { id: 37, name: "‡∏£‡∏™‡∏´‡∏ß‡∏≤‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏£‡∏≤ Sweet Taste Home", price: 55, category: "cakesBakeries", icon: "üè†" },
      { id: 38, name: "‡∏Ç‡∏ô‡∏°‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏Å‡∏•‡πâ Nearby Bakery", price: 50, category: "cakesBakeries", icon: "üè°" },

      // ‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤ (Pizza) - ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏≠‡∏¢‡∏π‡πà Main Dishes
      { id: 9, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏°‡∏≤‡∏Å‡∏≤‡∏£‡∏¥‡∏ï‡πâ‡∏≤ (Margherita)", price: 180, category: "pizza", icon: "üçï" },
      { id: 10, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡πÄ‡∏õ‡∏õ‡πÄ‡∏õ‡∏≠‡πÇ‡∏£‡∏ô‡∏µ (Pepperoni)", price: 220, category: "pizza", icon: "üçï" },
      { id: 11, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏Æ‡∏≤‡∏ß‡∏≤‡∏¢‡πÄ‡∏≠‡∏µ‡πâ‡∏¢‡∏ô (Hawaiian)", price: 200, category: "pizza", icon: "üçï" },
      { id: 12, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏ã‡∏∏‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏î‡∏µ‡∏•‡∏±‡∏Å‡∏ã‡πå (Super Deluxe)", price: 250, category: "pizza", icon: "üçï" },
      { id: 13, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏û‡∏£‡∏¥‡∏Å‡∏´‡∏¢‡∏ß‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡πá‡∏î (Bell Pepper & Mushroom)", price: 190, category: "pizza", icon: "üçï" },
      { id: 14, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡πÑ‡∏™‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏¥‡∏ï‡∏≤‡πÄ‡∏•‡∏µ‡∏¢‡∏ô (Italian Sausage)", price: 230, category: "pizza", icon: "üçï" },
      { id: 15, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡∏£‡∏°‡∏Ñ‡∏ß‡∏±‡∏ô (Smoked Salmon)", price: 280, category: "pizza", icon: "üçï" },
      { id: 16, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏ä‡∏µ‡∏™‡∏£‡∏ß‡∏°‡∏°‡∏¥‡∏ï‡∏£ (Four Cheese)", price: 210, category: "pizza", icon: "üçï" },
      { id: 17, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß‡πÑ‡∏Å‡πà (BBQ Chicken)", price: 200, category: "pizza", icon: "üçï" },
      { id: 18, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏ó‡∏∞‡πÄ‡∏•‡∏£‡∏ß‡∏° (Seafood)", price: 270, category: "pizza", icon: "üçï" },
      { id: 19, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏ú‡∏±‡∏Å‡πÇ‡∏Ç‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏¥‡∏Ñ‡∏≠‡∏ï‡∏ï‡πâ‡∏≤ (Spinach & Ricotta)", price: 195, category: "pizza", icon: "üçï" },
      { id: 20, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡πÄ‡∏ö‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡πÑ‡∏Ç‡πà (Bacon & Egg)", price: 215, category: "pizza", icon: "üçï" },
      { id: 21, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡πÑ‡∏Å‡πà (Paprika & Chicken)", price: 205, category: "pizza", icon: "üçï" },
      { id: 22, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏£‡∏™‡∏à‡∏±‡∏î (Spicy Hot)", price: 190, category: "pizza", icon: "üçï" },
      { id: 23, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏°‡∏∞‡∏Å‡∏≠‡∏Å‡∏î‡∏≥‡∏Å‡∏±‡∏ö‡πÅ‡∏Æ‡∏° (Black Olive & Ham)", price: 200, category: "pizza", icon: "üçï" },

      // ‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ (Spaghetti) - ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏≠‡∏¢‡∏π‡πà Main Dishes
      { id: 59, name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡∏Ñ‡∏≤‡πÇ‡∏ö‡∏ô‡∏≤‡∏£‡πà‡∏≤ (Carbonara)", price: 150, category: "spaghetti", icon: "üçù" },
      { id: 60, name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡πÇ‡∏ö‡πÇ‡∏•‡πÄ‡∏ô‡∏™ (Bolognese)", price: 140, category: "spaghetti", icon: "üçù" },
      { id: 61, name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡∏ú‡∏±‡∏î‡∏Ç‡∏µ‡πâ‡πÄ‡∏°‡∏≤‡∏ó‡∏∞‡πÄ‡∏• (Spicy Seafood)", price: 160, category: "spaghetti", icon: "üçù" },
      { id: 62, name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡πÄ‡∏ö‡∏Ñ‡∏≠‡∏ô‡∏û‡∏£‡∏¥‡∏Å‡πÅ‡∏´‡πâ‡∏á (Dried Chili Bacon)", price: 130, category: "spaghetti", icon: "üçù" },
      { id: 63, name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡∏ã‡∏≠‡∏™‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏® (Tomato Sauce)", price: 120, category: "spaghetti", icon: "üçù" },

      // ‡∏™‡πÄ‡∏ï‡πá‡∏Å (Steak) - ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏≠‡∏¢‡∏π‡πà Main Dishes
      { id: 49, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢‡∏î‡∏≥ (Black Pepper Steak)", price: 180, category: "steak", icon: "ü•©" },
      { id: 50, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏ã‡∏≠‡∏™‡πÄ‡∏´‡πá‡∏î‡∏´‡∏≠‡∏° (Mushroom Sauce Steak)", price: 190, category: "steak", icon: "ü•©" },
      { id: 51, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏´‡∏°‡∏π‡∏à‡∏¥‡πâ‡∏°‡πÅ‡∏à‡πà‡∏ß (Spicy Thai Dipping Pork Steak)", price: 170, category: "steak", icon: "üçñ" },
      { id: 52, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡πÅ‡∏à‡πà‡∏ß (Thai Spicy Beef Steak)", price: 220, category: "steak", icon: "ü•©" },
      { id: 53, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÑ‡∏Å‡πà‡∏ã‡∏≠‡∏™‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢ (Garlic Pepper Chicken Steak)", price: 160, category: "steak", icon: "üçó" },
      { id: 54, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏´‡∏°‡∏π‡∏ã‡∏≠‡∏™‡πÄ‡∏ó‡∏≠‡∏£‡∏¥‡∏¢‡∏≤‡∏Å‡∏¥ (Teriyaki Pork Steak)", price: 175, category: "steak", icon: "üçñ" },
      { id: 55, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÅ‡∏ã‡πà‡∏ö (Zapp Steak ‚Äì ‡πÅ‡∏ô‡∏ß‡∏≠‡∏µ‡∏™‡∏≤‡∏ô‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏ô)", price: 185, category: "steak", icon: "üå∂Ô∏è" },
      { id: 56, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏õ‡∏•‡∏≤‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡∏¢‡πà‡∏≤‡∏á‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß (Grilled Salmon with Soy Glaze)", price: 250, category: "steak", icon: "üêü" },
      { id: 57, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏´‡∏°‡∏π‡∏û‡∏£‡∏¥‡∏Å‡πÄ‡∏Å‡∏•‡∏∑‡∏≠ (Spicy Pork Steak Thai Style)", price: 170, category: "steak", icon: "üå∂Ô∏è" },
      { id: 58, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÑ‡∏Å‡πà‡∏•‡∏≤‡∏ö (Larb Chicken Steak)", price: 165, category: "steak", icon: "üçó" },

      // ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢ (Thai Food) - ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏≠‡∏¢‡∏π‡πà Main Dishes
      { id: 64, name: "‡∏ú‡∏±‡∏î‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡πÑ‡∏Å‡πà‡πÑ‡∏Ç‡πà‡∏î‡∏≤‡∏ß (Stir-fried Basil with Chicken & Fried Egg)", price: 80, category: "thaiFood", icon: "üçö" },
      { id: 65, name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏Å‡∏∏‡πâ‡∏á (Shrimp Fried Rice)", price: 90, category: "thaiFood", icon: "üç§" },
      { id: 66, name: "‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á‡∏ô‡πâ‡∏≥‡∏Ç‡πâ‡∏ô (Creamy Tom Yum Goong)", price: 120, category: "thaiFood", icon: "üç≤" },
      { id: 67, name: "‡πÅ‡∏Å‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏ß‡∏≤‡∏ô‡πÑ‡∏Å‡πà (Green Curry with Chicken)", price: 100, category: "thaiFood", icon: "üçõ" },
      { id: 68, name: "‡∏û‡∏∞‡πÅ‡∏ô‡∏á‡∏´‡∏°‡∏π (Panaeng Curry with Pork)", price: 110, category: "thaiFood", icon: "üçú" },
      { id: 69, name: "‡∏â‡∏π‡πà‡∏â‡∏µ‡πà‡∏õ‡∏•‡∏≤‡∏ó‡∏π (Chu Chee Mackerel)", price: 130, category: "thaiFood", icon: "üêü" },
      { id: 70, name: "‡πÅ‡∏Å‡∏á‡∏™‡πâ‡∏°‡∏Å‡∏∏‡πâ‡∏á‡∏ú‡∏±‡∏Å‡∏£‡∏ß‡∏° (Sour Curry with Shrimp & Mixed Veggies)", price: 120, category: "thaiFood", icon: "üå∂Ô∏è" },
      { id: 71, name: "‡∏™‡πâ‡∏°‡∏ï‡∏≥‡πÑ‡∏ó‡∏¢ (Papaya Salad Thai Style)", price: 70, category: "thaiFood", icon: "ü•ó" },
      { id: 72, name: "‡∏•‡∏≤‡∏ö‡∏´‡∏°‡∏π (Spicy Minced Pork Salad)", price: 90, category: "thaiFood", icon: "üå∂Ô∏è" },
      { id: 73, name: "‡∏ô‡πâ‡∏≥‡∏ï‡∏Å‡∏´‡∏°‡∏π (Spicy Grilled Pork Salad)", price: 95, category: "thaiFood", icon: "üçñ" },
      { id: 74, name: "‡πÑ‡∏Å‡πà‡∏¢‡πà‡∏≤‡∏á (Grilled Chicken)", price: 120, category: "thaiFood", icon: "üçó" },
      { id: 75, name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ã‡∏≠‡∏¢‡πÑ‡∏Å‡πà (Khao Soi with Chicken)", price: 100, category: "thaiFood", icon: "üçú" },
      { id: 76, name: "‡πÅ‡∏Å‡∏á‡∏Æ‡∏±‡∏á‡πÄ‡∏• (Hang Le Curry)", price: 110, category: "thaiFood", icon: "üç≤" },
      { id: 77, name: "‡πÑ‡∏™‡πâ‡∏≠‡∏±‡πà‡∏ß (Northern Thai Sausage)", price: 85, category: "thaiFood", icon: "üå≠" },
      // ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÅ‡∏ô‡∏ß‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á
      { id: 100, name: "‡∏Å‡∏≤‡πÅ‡∏ü‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡πÑ‡∏ü‡∏£‡πå", price: 45, category: "coffee", icon: "üî•" },
      { id: 101, name: "‡∏ä‡∏≤‡∏°‡∏¥‡∏ô‡∏ï‡πå‡∏õ‡πà‡∏≤", price: 40, category: "tea", icon: "üåø" },
      { id: 102, name: "‡∏™‡∏°‡∏π‡∏ó‡∏ï‡∏µ‡πâ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡∏õ‡πà‡∏≤", price: 55, category: "juice", icon: "üçì" },

      // ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ô‡∏ß‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á
      { id: 103, name: "‡πÅ‡∏ã‡∏ô‡∏ß‡∏¥‡∏ä‡πÅ‡∏Ñ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á", price: 60, category: "singleDish", icon: "ü•™" },
      { id: 104, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÅ‡∏Ñ‡∏°‡∏õ‡πå‡πÑ‡∏ü‡∏£‡πå", price: 180, category: "steak", icon: "ü•©" },
      { id: 105, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÑ‡∏°‡πâ", price: 220, category: "pizza", icon: "üçï" }
    ];

    const menuListEl = document.getElementById('menuList');
    const orderTableBody = document.querySelector('#orderTable tbody');
    const totalAmountEl = document.getElementById('totalAmount');
    const statusMsg = document.getElementById('statusMsg');
    const sendOrderBtn = document.getElementById('sendOrderBtn');
    const clearOrderBtn = document.getElementById('clearOrderBtn');
    const categoryBtns = document.querySelectorAll('.category-btn');
    const subCategoryDrink = document.getElementById('subCategoryDrink');
    const subCategoryDessert = document.getElementById('subCategoryDessert');
    const subCategoryMainDish = document.getElementById('subCategoryMainDish');
    const allSubCategoryDivs = document.querySelectorAll('#subCategoryDrink, #subCategoryDessert, #subCategoryMainDish');
    const currentTimeEl = document.getElementById('current-time');
    const eatHereRadio = document.getElementById('eatHere');
    const takeHomeRadio = document.getElementById('takeHome');
    const tableSelectContainer = document.getElementById('tableSelectContainer');
    const tableNumberSelect = document.getElementById('tableNumber');
    const receiptModal = new bootstrap.Modal(document.getElementById('receiptModal'));
    const receiptContentDiv = document.getElementById('receiptContent');
    const qrImageEl = document.getElementById('qrImage');


    let orders = JSON.parse(localStorage.getItem('cafeOrders')) || []; // ‡πÇ‡∏´‡∏•‡∏î orders ‡∏à‡∏≤‡∏Å localStorage

    // Function to get translation
    function getTranslation(key, placeholders = {}) {
      let text = translations[currentLang][key] || key; // Fallback to key if not found
      for (const p in placeholders) {
        text = text.replace(`{${p}}`, placeholders[p]);
      }
      return text;
    }

    // Function to update UI elements based on current language
    function updateUIForLanguage() {
      document.getElementById('appTitle').textContent = getTranslation('appTitle');
      document.getElementById('menuHeader').textContent = getTranslation('menuHeader');
      document.getElementById('orderListHeader').textContent = getTranslation('orderListHeader');

      // Update main category buttons
      document.querySelector('.category-btn[data-category="all"]').textContent = getTranslation('allCategory');
      document.querySelector('.category-btn[data-category="drink"]').textContent = getTranslation('drinkCategory');
      document.querySelector('.category-btn[data-category="food"]').textContent = getTranslation('foodCategory');
      document.querySelector('.category-btn[data-category="dessert"]').textContent = getTranslation('dessertCategory');
      document.querySelector('.category-btn[data-category="mainDish"]').textContent = getTranslation('mainDishCategory');

      // Update sub-category buttons
      document.querySelector('#subCategoryDrink .sub-category-btn[data-category="coffee"]').textContent = getTranslation('coffeeSubCategory');
      document.querySelector('#subCategoryDrink .sub-category-btn[data-category="tea"]').textContent = getTranslation('teaSubCategory');
      document.querySelector('#subCategoryDrink .sub-category-btn[data-category="juice"]').textContent = getTranslation('juiceSubCategory');
      document.querySelector('#subCategoryDrink .sub-category-btn[data-category="otherDrink"]').textContent = getTranslation('otherDrinkSubCategory');
      document.querySelector('#subCategoryDrink .sub-category-btn[data-category="alcohol"]').textContent = getTranslation('alcoholSubCategory');

      document.querySelector('#subCategoryDessert .sub-category-btn[data-category="cakesBakeries"]').textContent = getTranslation('cakesBakeriesSubCategory');
      document.querySelector('#subCategoryDessert .sub-category-btn[data-category="otherDessert"]').textContent = getTranslation('otherDessertSubCategory');

      document.querySelector('#subCategoryMainDish .sub-category-btn[data-category="pizza"]').textContent = getTranslation('pizzaSubCategory');
      document.querySelector('#subCategoryMainDish .sub-category-btn[data-category="spaghetti"]').textContent = getTranslation('spaghettiSubCategory');
      document.querySelector('#subCategoryMainDish .sub-category-btn[data-category="steak"]').textContent = getTranslation('steakSubCategory');
      document.querySelector('#subCategoryMainDish .sub-category-btn[data-category="thaiFood"]').textContent = getTranslation('thaiFoodSubCategory');

      document.getElementById('colMenuName').textContent = getTranslation('menuNameCol');
      document.getElementById('colPrice').textContent = getTranslation('priceCol');
      document.getElementById('colQty').textContent = getTranslation('qtyCol');
      document.getElementById('colTotal').textContent = getTranslation('totalCol');
      document.getElementById('colManage').textContent = getTranslation('manageCol');
      document.getElementById('totalAmountLabel').textContent = getTranslation('grandTotal');

      document.getElementById('orderTypeHeader').textContent = getTranslation('orderTypeLabel');
      document.getElementById('orderTypeLabel').textContent = getTranslation('orderTypeLabel');
      document.getElementById('eatHereLabel').innerHTML = `${getTranslation('eatHere')} <span class="fs-4">üçΩÔ∏è</span>`;
      document.getElementById('takeHomeLabel').innerHTML = `${getTranslation('takeHome')} <span class="fs-4">üõçÔ∏è</span>`;
      document.getElementById('tableSelectLabel').innerHTML = `${getTranslation('tableSelectLabel')} <span class="fs-4 ms-2">ü™ë</span>`;

      // Update table number options
      document.querySelector('#tableNumber option[value="table1"]').textContent = getTranslation('table1');
      document.querySelector('#tableNumber option[value="table2"]').textContent = getTranslation('table2');
      document.querySelector('#tableNumber option[value="table3"]').textContent = getTranslation('table3');
      document.querySelector('#tableNumber option[value="table4"]').textContent = getTranslation('table4');


      document.getElementById('clearOrderBtn').innerHTML = `<i class="bi bi-trash"></i> ${getTranslation('clearOrderBtn')}`;
      document.getElementById('sendOrderBtn').innerHTML = `<i class="bi bi-send-check"></i> ${getTranslation('sendOrderBtn')}`;

      document.getElementById('receiptModalTitle').textContent = getTranslation('modalReceiptTitle');
      document.getElementById('cafeNameReceipt').textContent = getTranslation('cafeNameReceiptHeader');
      document.getElementById('printReceiptBtn').innerHTML = `<i class="bi bi-printer"></i> ${getTranslation('printReceiptBtn')}`;
      document.getElementById('closeModalBtn').textContent = getTranslation('closeBtn');

      renderMenu(); // Re-render menu to apply language change to menu items
      renderOrders(); // Re-render orders to apply language change to order list
      updateCurrentTime(); // Update time display for new language
    }

    // Function to switch language
    function switchLanguage(lang) {
      currentLang = lang;
      localStorage.setItem('currentLang', lang); // Save language preference
      updateUIForLanguage();
    }

    // Initialize language from localStorage or default to 'th'
    document.addEventListener('DOMContentLoaded', () => {
        const savedLang = localStorage.getItem('currentLang');
        if (savedLang) {
            currentLang = savedLang;
        }
        updateUIForLanguage();
        // Check for dark mode preference as well
        if (localStorage.getItem('darkMode') === 'enabled' || (new Date().getHours() >= 18 || new Date().getHours() < 6)) {
            document.body.classList.add('dark-mode');
        }
    });

    function updateCurrentTime() {
      const now = new Date();
      // Changed to use the currentLang for locale string formatting
      currentTimeEl.textContent = now.toLocaleString(currentLang === 'th' ? 'th-TH' : 'en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' });
    }
    setInterval(updateCurrentTime, 1000);
    updateCurrentTime();

    document.getElementById('themeToggle').addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
        // Save dark mode preference
        if (document.body.classList.contains('dark-mode')) {
            localStorage.setItem('darkMode', 'enabled');
        } else {
            localStorage.setItem('darkMode', 'disabled');
        }
    });

    function renderMenu() {
      menuListEl.innerHTML = '';
      let filtered = [];

      if (currentActiveSubCategory !== 'all') {
        filtered = menuItems.filter(item => item.category === currentActiveSubCategory);
      } else {
        if (currentActiveCategory === 'all') {
          filtered = menuItems;
        } else if (currentActiveCategory === 'drink') {
          filtered = menuItems.filter(item => ['coffee', 'tea', 'juice', 'otherDrink', 'alcohol'].includes(item.category));
        } else if (currentActiveCategory === 'food') {
          filtered = menuItems.filter(item => item.category === 'singleDish');
        } else if (currentActiveCategory === 'dessert') {
          filtered = menuItems.filter(item => ['cakesBakeries', 'otherDessert'].includes(item.category));
        } else if (currentActiveCategory === 'mainDish') {
          filtered = menuItems.filter(item => ['pizza', 'spaghetti', 'steak', 'thaiFood'].includes(item.category));
        }
      }

      if (filtered.length === 0) {
        menuListEl.innerHTML = `<p class="text-center text-muted mt-3">${getTranslation('noMenuInCategory')}</p>`;
        return;
      }

      filtered.forEach(item => {
        const div = document.createElement('div');
        div.className = 'menu-item d-flex justify-content-between align-items-center';

        const nameSpan = document.createElement('span');
        nameSpan.textContent = `${item.icon} ${item.name}`;

        const priceSpan = document.createElement('span');
        priceSpan.className = 'fw-bold';
        if (item.isGame) {
          priceSpan.textContent = getTranslation('game'); // Display "Game" instead of price
        } else {
          priceSpan.textContent = `${item.price} ${getTranslation('‡∏ö‡∏≤‡∏ó')}`;
        }

        div.appendChild(nameSpan);
        div.appendChild(priceSpan);

        div.addEventListener('click', () => {
          if (item.isGame) {
            window.open(item.gameUrl, '_blank'); // Open game URL in new tab
          } else {
            addToOrder(item);
          }
        });
        menuListEl.appendChild(div);
      });
    }

    function addToOrder(item) {
      const existingItem = orders.find(order => order.id === item.id);
      if (existingItem) {
        existingItem.qty++;
      } else {
        orders.push({ ...item, qty: 1 });
      }
      saveOrders();
      renderOrders();
      showStatusMsg(getTranslation('addToOrderSuccess', { itemName: item.name }), 'success');
    }

    function removeFromOrder(id) {
      const itemIndex = orders.findIndex(order => order.id === id);
      if (itemIndex > -1) {
        const removedItem = orders[itemIndex];
        orders.splice(itemIndex, 1);
        saveOrders();
        renderOrders();
        showStatusMsg(getTranslation('removeFromOrderSuccess', { itemName: removedItem.name }), 'danger');
      }
    }

    function updateQuantity(id, change) {
      const item = orders.find(order => order.id === id);
      if (item) {
        item.qty += change;
        if (item.qty <= 0) {
          removeFromOrder(id);
        } else {
          saveOrders();
          renderOrders();
        }
      }
    }

    function renderOrders() {
      orderTableBody.innerHTML = '';
      let totalAmount = 0;

      if (orders.length === 0) {
        totalAmountEl.textContent = '0';
        return;
      }

      orders.forEach(order => {
        const row = orderTableBody.insertRow();
        const itemTotal = order.price * order.qty;
        totalAmount += itemTotal;

        row.insertCell().textContent = order.name;
        row.insertCell().textContent = `${order.price} ${getTranslation('‡∏ö‡∏≤‡∏ó')}`;

        const qtyCell = row.insertCell();
        const qtyGroup = document.createElement('div');
        qtyGroup.className = 'input-group input-group-sm';

        const minusBtn = document.createElement('button');
        minusBtn.className = 'btn btn-outline-danger';
        minusBtn.textContent = '-';
        minusBtn.onclick = () => updateQuantity(order.id, -1);

        const qtySpan = document.createElement('span');
        qtySpan.className = 'form-control text-center';
        qtySpan.textContent = order.qty;

        const plusBtn = document.createElement('button');
        plusBtn.className = 'btn btn-outline-success';
        plusBtn.textContent = '+';
        plusBtn.onclick = () => updateQuantity(order.id, 1);

        qtyGroup.appendChild(minusBtn);
        qtyGroup.appendChild(qtySpan);
        qtyGroup.appendChild(plusBtn);
        qtyCell.appendChild(qtyGroup);

        row.insertCell().textContent = `${itemTotal} ${getTranslation('‡∏ö‡∏≤‡∏ó')}`;

        const manageCell = row.insertCell();
        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'btn btn-danger btn-sm';
        deleteBtn.innerHTML = '<i class="bi bi-x-circle"></i>';
        deleteBtn.onclick = () => removeFromOrder(order.id);
        manageCell.appendChild(deleteBtn);
      });

      totalAmountEl.textContent = totalAmount.toLocaleString() + ` ${getTranslation('‡∏ö‡∏≤‡∏ó')}`;
    }

    function saveOrders() {
      localStorage.setItem('cafeOrders', JSON.stringify(orders));
    }

    function showStatusMsg(message, type) {
      statusMsg.textContent = message;
      statusMsg.className = `mt-3 alert alert-${type}`;
      statusMsg.style.display = 'block';
      setTimeout(() => {
        statusMsg.style.display = 'none';
      }, 3000);
    }

    // Event Listeners for category buttons
    categoryBtns.forEach(button => {
      button.addEventListener('click', () => {
        categoryBtns.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        currentActiveCategory = button.dataset.category;
        currentActiveSubCategory = 'all'; // Reset sub-category when main category changes

        // Hide all sub-category divs
        allSubCategoryDivs.forEach(div => div.classList.add('d-none'));

        // Show relevant sub-category div
        if (currentActiveCategory === 'drink') {
          subCategoryDrink.classList.remove('d-none');
        } else if (currentActiveCategory === 'dessert') {
          subCategoryDessert.classList.remove('d-none');
        } else if (currentActiveCategory === 'mainDish') {
          subCategoryMainDish.classList.remove('d-none');
        }

        renderMenu();
      });
    });

    // Event Listeners for sub-category buttons
    document.querySelectorAll('.sub-category-btn').forEach(button => {
      button.addEventListener('click', () => {
        // Deactivate all sub-category buttons within the visible sub-category group
        document.querySelectorAll(`#${button.closest('div').id} .sub-category-btn`).forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        currentActiveSubCategory = button.dataset.category;
        renderMenu();
      });
    });


    clearOrderBtn.addEventListener('click', () => {
      if (confirm(getTranslation('clearOrderConfirm'))) {
        orders = [];
        saveOrders();
        renderOrders();
        showStatusMsg(getTranslation('orderCleared'), 'info');
      }
    });

    sendOrderBtn.addEventListener('click', () => {
      if (orders.length === 0) {
        showStatusMsg(getTranslation('noItemsSelected'), 'warning');
        return;
      }

      showStatusMsg(getTranslation('sendingOrder'), 'info');

      const orderType = document.querySelector('input[name="orderType"]:checked').value;
      const tableNumber = orderType === 'eatHere' ? tableNumberSelect.value : null;

      // Simulate sending data (replace with actual backend API call)
      setTimeout(() => {
        const success = true; // Simulate success or failure
        if (success) {
          showStatusMsg(getTranslation('orderSuccess'), 'success');
          generateReceipt(orderType, tableNumber);
          receiptModal.show(); // Show the receipt modal
          orders = []; // Clear orders after successful send
          saveOrders();
          renderOrders();
        } else {
          showStatusMsg(getTranslation('orderFailed', { errorMessage: 'Server error' }), 'danger');
        }
      }, 1500);
    });

    // Handle radio button changes for order type
    eatHereRadio.addEventListener('change', () => {
      tableSelectContainer.style.display = eatHereRadio.checked ? 'block' : 'none';
    });
    takeHomeRadio.addEventListener('change', () => {
      tableSelectContainer.style.display = takeHomeRadio.checked ? 'none' : 'block';
    });

    // Initial state for table select container
    tableSelectContainer.style.display = eatHereRadio.checked ? 'block' : 'none';


    function generateReceipt(orderType, tableNumber) {
        let receiptHtml = `
            <div class="text-center mb-3">
                <h5 class="mb-0" id="receiptTitle">${getTranslation('orderReceipt')}</h5>
                <p class="mb-0" id="receiptDateTime">${new Date().toLocaleString(currentLang === 'th' ? 'th-TH' : 'en-US')}</p>
                <p class="mb-0">${getTranslation('receiptOrderType')}: ${getTranslation(orderType)}</p>
                ${tableNumber ? `<p class="mb-0">${getTranslation('receiptTableNumber')}: ${getTranslation(tableNumber)}</p>` : ''}
            </div>
            <table class="table table-sm table-bordered">
                <thead>
                    <tr>
                        <th>${getTranslation('item')}</th>
                        <th class="text-end">${getTranslation('priceCol')}</th>
                        <th class="text-center">${getTranslation('qty')}</th>
                        <th class="text-end">${getTranslation('total')}</th>
                    </tr>
                </thead>
                <tbody>
        `;

        let totalAmount = 0;
        orders.forEach(order => {
            const itemTotal = order.price * order.qty;
            totalAmount += itemTotal;
            receiptHtml += `
                <tr>
                    <td>${order.name}</td>
                    <td class="text-end">${order.price}</td>
                    <td class="text-center">${order.qty}</td>
                    <td class="text-end">${itemTotal}</td>
                </tr>
            `;
        });

        receiptHtml += `
                </tbody>
                <tfoot>
                    <tr>
                        <th colspan="3" class="text-end">${getTranslation('grandTotalReceipt')}</th>
                        <th class="text-end">${totalAmount} ${getTranslation('‡∏ö‡∏≤‡∏ó')}</th>
                    </tr>
                </tfoot>
            </table>
            <p class="text-center mt-3">${getTranslation('thankYou')}</p>
        `;

        // Update the receipt content in the modal
        receiptContentDiv.innerHTML = receiptHtml;

        // Generate QR code for payment (example: prompt for QR code generation)
        // For a real application, this would integrate with a payment gateway.
        const paymentInfo = `Order Total: ${totalAmount} ${getTranslation('‡∏ö‡∏≤‡∏ó')}. Type: ${getTranslation(orderType)}${tableNumber ? `, Table: ${getTranslation(tableNumber)}` : ''}.`;
        const qrCodeApi = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(paymentInfo)}`;
        qrImageEl.src = qrCodeApi;
    }


    function printReceipt() {
      const printContents = document.getElementById('receiptContent').innerHTML;
      const originalContents = document.body.innerHTML;

      // Create a new window for printing
      const printWindow = window.open('', '', 'height=600,width=800');
      printWindow.document.write('<html><head><title>Print Receipt</title>');
      // Copy necessary styles for printing
      printWindow.document.write('<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">');
      printWindow.document.write('<style>');
      printWindow.document.write('body { font-family: \'Sarabun\', sans-serif; }');
      printWindow.document.write('table { width: 100%; border-collapse: collapse; }');
      printWindow.document.write('th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }');
      printWindow.document.write('th { background-color: #f2f2f2; }');
      printWindow.document.write('.text-end { text-align: right; }');
      printWindow.document.write('.text-center { text-align: center; }');
      printWindow.document.write('.mb-0 { margin-bottom: 0 !important; }');
      printWindow.document.write('</style>');
      printWindow.document.write('</head><body>');
      printWindow.document.write(printContents);
      printWindow.document.write('</body></html>');
      printWindow.document.close();
      printWindow.focus();
      printWindow.print();
      // Optionally, close the print window after printing (may not work on all browsers due to security)
      // printWindow.onafterprint = function() { printWindow.close(); };
    }


    // Initial rendering
    renderMenu();
    renderOrders();
  </script>
</body>

</html>
