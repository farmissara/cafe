<!DOCTYPE html>
<html lang="th">
<head>
    <style>
    body {
    font-family: 'Sarabun', sans-serif;
    background: linear-gradient(135deg, #fff8f0 0%, #ffe8ee 100%);
    color: #5a4534;
    padding: 10px;
    position: relative;
    transition: background 0.5s, color 0.3s;
}

body::before {
    content: '';
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: url('https://www.transparenttextures.com/patterns/diamond-upholstery.png');
    background-size: 300px 300px;
    opacity: 0.08;
    z-index: 0;
    pointer-events: none;
}

/* Card & Layout */
.container-fluid, .card {
    position: relative;
    z-index: 1;
}
.card {
    border: none;
    box-shadow: 0 4px 18px 0 rgba(214,189,210,0.11);
    border-radius: 1.3rem;
    background: rgba(255,255,255,0.92);
    backdrop-filter: blur(7px);
    transition: box-shadow 0.3s, background 0.3s;
    margin-bottom: 1.2rem;
}

/* Header */
.card-header {
    background: linear-gradient(90deg, #f8e1e0 0%, #e8f8eb 100%);
    color: #7d5555;
    font-weight: 600;
    font-size: 1.12rem;
    letter-spacing: 0.7px;
    border-top-left-radius: 1.3rem !important;
    border-top-right-radius: 1.3rem !important;
    border-bottom: none;
}

/* Custom header for Order Type/Table Selection */
.order-type-header {
    background: linear-gradient(90deg, #ffe3e9 0%, #eafff7 100%) !important;
    color: #6c6f7c !important;
    font-weight: 700;
    font-size: 1.18rem;
    text-align: center;
    border-top-left-radius: 1.3rem !important;
    border-top-right-radius: 1.3rem !important;
    border-bottom: none;
}

/* Heading */
h2 {
    font-weight: 700;
    color: #b48b7d;
    text-shadow: 1px 2px 0 #fff9;
    letter-spacing: 1.2px;
    font-size: 1.6rem;
}

/* Buttons */
.btn {
    border-radius: 999px;
    font-weight: 500;
    font-family: 'Sarabun',sans-serif;
    transition: background 0.3s, color 0.3s, border 0.3s;
    box-shadow: 0 2px 8px #f3b0b6a8;
    font-size: 1.06rem;
    padding: 8px 18px;
    min-width: 40px;
}
.btn-outline-primary.active,
.btn-outline-primary:hover {
    background-color: #ffe7e0;
    color: #7d5555;
    border-color: #f8b7ac;
}
.btn-danger, .btn-danger:focus, .btn-danger:active {
    background: linear-gradient(90deg,#f9bebe 0%,#ffe3e3 100%);
    color: #a35656;
    border: none;
}
.btn-danger:hover {
    background: #f4dddd;
    color: #b34a4a;
}
.btn-primary, .btn-primary:focus {
    background: linear-gradient(90deg,#b4d9ce 0%,#ffe3e3 100%);
    color: #5f6d70;
    border: none;
}
.btn-primary:hover {
    background: #f9e9eb;
    color: #7d5555;
}
.btn-outline-secondary:hover {
    background: #f9dbe4;
    color: #ae6b8e;
    border-color: #f9c1e2;
}

/* Category Buttons */
.category-btn, .sub-category-btn {
    font-size: 1rem;
    padding: 8px 14px;
    margin: 2px 2px 6px 0;
    border-radius: 999px !important;
    background: #fffaf9;
    color: #b48b7d;
    border-color: #f9dbd8;
    letter-spacing: 0.2px;
    min-width: 75px;
}
.sub-category-btn {
    margin-left: 8px;
    border-color: #f3efe6;
    background: #fff7f7;
}
.sub-category-btn.active, .category-btn.active {
    background-color: #fbeee7 !important;
    border-color: #f9c1e2 !important;
    color: #ae6b8e !important;
    font-weight: 600;
}

/* Menu Items */
.menu-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    max-height: 65vh;
    overflow-y: auto;
    padding: 4px;
}
.menu-item {
    background: linear-gradient(90deg,#fff7f3 60%,#f9f6f8 100%);
    border-radius: 1.2rem;
    border: 1.5px solid #f7e1da;
    margin-bottom: 7px;
    padding: 12px 13px 12px 11px;
    box-shadow: 0 1px 6px #ecc3d055;
    cursor: pointer;
    transition: box-shadow 0.15s, background 0.15s, transform 0.13s;
    display: flex;
    align-items: center;
    min-height: 54px;
}
.menu-item:active {
    transform: scale(0.98);
}
.menu-item:hover {
    background: #fffbf7;
    transform: scale(1.01) translateY(-1.5px);
    box-shadow: 0 4px 12px #e3d3e1a8;
}
.menu-item .menu-icon {
    font-size: 1.6rem;
    margin-right: 12px;
    filter: drop-shadow(0 2px 8px #f7d6eb66);
    opacity: .88;
}
.menu-item .menu-name {
    flex-grow: 1;
    font-weight: 600;
    color: #876c5d;
    letter-spacing: 0.1px;
    font-size: 1.08rem;
}
.menu-item .menu-price {
    font-weight: 600;
    color: #bda9a2;
    font-size: 1.01rem;
    letter-spacing: 0.5px;
    margin-left: 6px;
}

/* Table */
.table-responsive { overflow-x: auto; }
.table thead {
    background: linear-gradient(90deg,#f7d6eb 0%,#fdf7f1 100%);
    color: #7d5555;
    font-weight: 600;
    border: none;
    font-size: 1.04rem;
}
.table td, .table th {
    vertical-align: middle;
    border: none;
    background: transparent;
    font-size: 1.01rem;
    padding: 8px 5px;
}
.table {
    background: rgba(255,255,255,0.98);
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: 0 2px 16px #f7d6eb24;
}

/* Quantity input group */
.qty-input-group {
    max-width: 95px;
    margin: auto;
}

/* Alerts */
.alert {
    border-radius: 1rem;
    background: #fff0f4;
    color: #946d8b;
    border: none;
    font-size: 1.02rem;
    padding: 8px 14px;
}
#statusMsg.alert-success {
    background: #ebf6ef;
    color: #468c6d;
}
#statusMsg.alert-danger {
    background: #ffe1e8;
    color: #b71c1c;
}
#statusMsg.alert-info {
    background: #e1f6fb;
    color: #6d74b3;
}

/* Theme toggle button */
#themeToggle {
    position: fixed;
    bottom: 15px;
    right: 15px;
    z-index: 999;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg,#fbeee7 0%,#f9dbe4 100%) !important;
    box-shadow: 0 2px 10px #f7d6eb44;
    color: #ba80a7 !important;
    border: 1.5px solid #f9dbd8 !important;
    font-size: 1.3rem;
}
#themeToggle:active { transform: scale(0.95); }

/* Language Toggle */
.language-toggle-buttons {
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 999;
}
.language-toggle-buttons .btn {
    min-width: 38px;
    font-weight: 600;
    font-size: 1.1rem;
    padding: 3px 7px;
    background: #fff5f9 !important;
    color: #b48b7d !important;
    border: 1.5px solid #f9dbd8 !important;
    box-shadow: 0 1px 6px #f7d6eb44;
    margin-right: 2px;
}
.language-toggle-buttons .btn.active, .language-toggle-buttons .btn:focus {
    background: #ffe7f3 !important;
    color: #ae6b8e !important;
}

/* Modal */
.modal-content {
    border-radius: 1.25rem;
    background: rgba(255,255,255,0.96);
    box-shadow: 0 4px 24px #f7d6eb44;
    border: none;
}
.modal-header, .modal-footer {
    border: none;
}

/* Header Section */
.header-section {
    text-align: center;
    padding: 16px 8px 14px 8px;
    background: linear-gradient(135deg, #f8e1e0, #e8f8eb 100%);
    border-radius: 1.2rem;
    box-shadow: 0 2px 8px #f7d6eb22;
    margin-bottom: 1.1rem;
}

/* Main Content Responsive */
.main-content {
    display: flex;
    flex-direction: column;
    gap: 16px;
}
.menu-section, .order-section {
    width: 100%;
}

/* Mobile Responsive */
@media (min-width: 768px) {
    .main-content {
        flex-direction: row;
        gap: 24px;
    }
    .menu-section, .order-section {
        width: 100%;
    }
}
@media (min-width: 1100px) {
    .main-content {
        flex-direction: row;
        gap: 34px;
    }
    .menu-section { width: 55%; }
    .order-section { width: 45%; }
}
@media (max-width: 900px) {
    .main-content { gap: 10px; }
    .header-section { padding: .7rem .7rem; }
    .menu-item { font-size: 1rem; }
    .card, .menu-card { padding: .7rem; }
}
@media (max-width: 600px) {
    .main-content { gap: 7px; }
    .header-section { font-size: 1.1rem; }
    .menu-item { width: 99vw; max-width: 99vw; }
    .card, .menu-card, .header-section { padding: .3rem !important; }
    .menu-list { max-height: 45vh; }
}

/* ======= Dark Mode ======= */
body.dark-mode {
    background: linear-gradient(120deg,#f4e3f0 0%,#e9e3ff 100%);
    color: #835b6c;
}
body.dark-mode .card, body.dark-mode .menu-card, body.dark-mode .modal-content {
    background: rgba(251,234,248,0.96);
    color: #835b6c;
    box-shadow: 0 0 18px #edb6d822;
}
body.dark-mode .card-header, body.dark-mode .order-type-header {
    background: linear-gradient(90deg,#fbeee7 0%,#e8eaff 100%) !important;
    color: #a17da2 !important;
}
body.dark-mode .menu-item {
    background: linear-gradient(90deg,#fbeee7 60%,#ede5fa 100%);
    border-color: #e7d3de;
    box-shadow: 0 2px 8px #a17da222;
}
body.dark-mode .menu-item:hover {
    background: #f4e3f0;
}
body.dark-mode .menu-icon, body.dark-mode .menu-price, body.dark-mode h2, body.dark-mode h4, body.dark-mode h5 {
    color: #a17da2 !important;
}
body.dark-mode .category-container {
    background: rgba(235,209,245,0.7);
}
body.dark-mode .table thead {
    background: linear-gradient(90deg,#e0b6d8 0%,#fdf7f1 100%);
    color: #a17da2 !important;
}
body.dark-mode .language-toggle-buttons .btn {
    background: #fbeee7 !important;
    color: #a17da2 !important;
    border-color: #e7d3de !important;
}
body.dark-mode #themeToggle {
    background: linear-gradient(135deg,#fbeee7 0%,#e7d3de 100%) !important;
    color: #a17da2 !important;
    border-color: #e7d3de !important;
}
body.dark-mode .btn-primary, body.dark-mode .btn-success {
    background: linear-gradient(90deg,#e7d3de 0%,#fbeee7 100%);
    color: #835b6c;
}
body.dark-mode .btn-primary:hover, body.dark-mode .btn-success:hover {
    background: #f4e3f0;
    color: #a17da2;
}
body.dark-mode .btn-danger {
    background: #e7d3de;
    color: #835b6c;
}
body.dark-mode .btn-danger:hover {
    background: #fbeee7;
    color: #a17da2;
}
body.dark-mode .alert {
    background: #fbeee7;
    color: #a17da2;
}
body.dark-mode #statusMsg.alert-success {
    background: #e7f8f2;
    color: #468c6d;
}
body.dark-mode #statusMsg.alert-info {
    background: #e1f6fb;
    color: #6d74b3;
}
body.dark-mode #statusMsg.alert-danger {
    background: #ffe1e8;
    color: #b71c1c;
}
    </style>
</head>

<body>
    <button id="themeToggle" class="btn btn-light">
        <i class="bi bi-moon-stars-fill"></i>
    </button>

    <div class="language-toggle-buttons">
        <button class="btn btn-outline-secondary btn-sm" onclick="switchLanguage('th')">🇹🇭</button>
        <button class="btn btn-outline-secondary btn-sm" onclick="switchLanguage('en')">🇬🇧</button>
    </div>

    <div class="container-fluid app-container">
        <div class="header-section">
            <h2 class="text-center" id="appTitle">บ้านพักครู /คาเฟ่ 🧁☕️</h2>
            <div class="text-center text-muted" id="current-time"></div>
        </div>

        <div class="main-content">
            <div class="menu-section">
                <div class="card menu-card">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0" id="menuHeader">เมนู</h4>
                    </div>
                    <div class="card-body">
                        <div class="category-container" id="categoryFilter">
                            <button class="btn btn-sm btn-outline-primary category-btn active" data-category="all">ทั้งหมด ✨</button>
                            <button class="btn btn-sm btn-outline-primary category-btn" data-category="drink">เครื่องดื่ม ☕️</button>
                            <div id="subCategoryDrink" class="d-none mt-2 w-100">
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="coffee">กาแฟ ☕</button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="tea">ชา 🍵</button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="juice">น้ำผลไม้ 🥤</button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="otherDrink">อื่นๆ 🍹</button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="alcohol">เหล้า-เบียร์ 🍻</button>
                            </div>
                            <button class="btn btn-sm btn-outline-primary category-btn" data-category="food">อาหาร 🥪</button>
                            <button class="btn btn-sm btn-outline-primary category-btn" data-category="dessert">ของหวาน 🍰</button>
                            <div id="subCategoryDessert" class="d-none mt-2 w-100">
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="cakesBakeries">เค้ก & เบเกอรี่ 🧁</button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="otherDessert">อื่นๆ 🍬</button>
                            </div>
                            <button class="btn btn-sm btn-outline-primary category-btn" data-category="mainDish">อาหารหลัก 🍽️</button>
                            <div id="subCategoryMainDish" class="d-none mt-2 w-100">
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="pizza">พิซซ่า 🍕</button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="spaghetti">สปาเก็ตตี้ 🍝</button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="steak">สเต็ก 🥩</button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="thaiFood">อาหารไทย 🍚</button>
                            </div>
                        </div>
                        <div class="menu-list" id="menuList"></div>
                    </div>
                </div>
            </div>

            <div class="order-section">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h4 class="mb-0" id="orderListHeader">รายการสั่งซื้อ</h4>
                    </div>
                    <div class="card-body order-summary">
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped" id="orderTable">
                                <thead class="table-dark">
                                    <tr>
                                        <th id="colMenuName">เมนู</th>
                                        <th id="colPrice">ราคา</th>
                                        <th id="colQty">จำนวน</th>
                                        <th id="colTotal">รวม</th>
                                        <th id="colManage">จัดการ</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                                <tfoot>
                                    <tr>
                                        <th colspan="3" class="text-end" id="totalAmountLabel">รวมทั้งหมด</th>
                                        <th id="totalAmount">0</th>
                                        <th></th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header order-type-header d-flex align-items-center justify-content-center">
                        <h4 class="mb-0" id="orderTypeHeader">เลือกประเภทออเดอร์</h4>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label" id="orderTypeLabel"><strong>ประเภทออเดอร์</strong></label>
                            <div class="form-check d-flex align-items-center mb-2">
                                <input class="form-check-input me-2" type="radio" name="orderType" id="eatHere" value="นั่งทานที่ร้าน" checked>
                                <label class="form-check-label fs-5" for="eatHere" id="eatHereLabel">
                                    นั่งทานที่ร้าน <span class="fs-4">🍽️</span>
                                </label>
                            </div>
                            <div class="form-check d-flex align-items-center">
                                <input class="form-check-input me-2" type="radio" name="orderType" id="takeHome" value="ซื้อกลับบ้าน">
                                <label class="form-check-label fs-5" for="takeHome" id="takeHomeLabel">
                                    ซื้อกลับบ้าน <span class="fs-4">🛍️</span>
                                </label>
                            </div>
                            <div id="tableSelectContainer" class="mt-3">
                                <label for="tableNumber" class="form-label d-flex align-items-center fs-5" id="tableSelectLabel">
                                    เลือกโต๊ะ <span class="fs-4 ms-2">🪑</span>
                                </label>
                                <select class="form-select form-select-lg" id="tableNumber">
                                    <option value="โต๊ะ 1">โต๊ะ 1</option>
                                    <option value="โต๊ะ 2">โต๊ะ 2</option>
                                    <option value="โต๊ะ 3">โต๊ะ 3</option>
                                    <option value="โต๊ะ 4">โต๊ะ 4</option>
                                </select>
                            </div>
                        </div>
                        <div class="order-actions">
                            <button class="btn btn-danger" id="clearOrderBtn"><i class="bi bi-trash"></i> <span id="clearOrderBtnText">ล้างรายการ</span></button>
                            <button class="btn btn-primary" id="sendOrderBtn"><i class="bi bi-send-check"></i> <span id="sendOrderBtnText">ส่งออเดอร์</span></button>
                        </div>
                        <div id="statusMsg" class="mt-3 alert" style="display:none;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="receiptModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="receiptModalTitle">ใบเสร็จรับเงิน</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="receiptContent">
                    <h6 class="text-center" id="cafeNameReceipt">บ้านพักครู คาเฟ่ 🏠</h6>
                    <div id="receiptDetails" class="mb-3"></div>
                    <div id="receiptTable"></div>
                    <p class="text-center mt-4">ขอบคุณที่ใช้บริการ!</p>
                    <div class="text-center mt-3"><img id="qrImage" src="" width="150" /></div>
                </div>
                <div class="modal-footer">
                    <button onclick="printReceipt()" class="btn btn-outline-secondary" id="printReceiptBtn"><i class="bi bi-printer"></i> <span id="printReceiptBtnText">พิมพ์ใบเสร็จ</span></button>
                    <button class="btn btn-secondary" data-bs-dismiss="modal" id="closeModalBtn">ปิด</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ข้อมูลภาษา
        const translations = {
            "th": {
                "appTitle": "บ้านพักครู /คาเฟ่ 🧁☕️",
                "menuHeader": "เมนู",
                "orderListHeader": "รายการสั่งซื้อ",
                "allCategory": "ทั้งหมด ✨",
                "drinkCategory": "เครื่องดื่ม ☕️",
                "foodCategory": "อาหาร 🥪",
                "dessertCategory": "ของหวาน 🍰",
                "mainDishCategory": "อาหารหลัก 🍽️",
                "coffeeSubCategory": "กาแฟ ☕",
                "teaSubCategory": "ชา 🍵",
                "juiceSubCategory": "น้ำผลไม้ 🥤",
                "otherDrinkSubCategory": "อื่นๆ 🍹",
                "alcoholSubCategory": "เหล้า-เบียร์ 🍻",
                "pizzaSubCategory": "พิซซ่า 🍕",
                "spaghettiSubCategory": "สปาเก็ตตี้ 🍝",
                "steakSubCategory": "สเต็ก 🥩",
                "thaiFoodSubCategory": "อาหารไทย 🍚",
                "cakesBakeriesSubCategory": "เค้ก & เบเกอรี่ 🧁",
                "otherDessertSubCategory": "อื่นๆ 🍬",
                "menuNameCol": "เมนู",
                "priceCol": "ราคา",
                "qtyCol": "จำนวน",
                "totalCol": "รวม",
                "manageCol": "จัดการ",
                "grandTotal": "รวมทั้งหมด",
                "orderTypeLabel": "ประเภทออเดอร์",
                "eatHere": "นั่งทานที่ร้าน",
                "takeHome": "ซื้อกลับบ้าน",
                "tableSelectLabel": "เลือกโต๊ะ",
                "clearOrderBtn": "ล้างรายการ",
                "sendOrderBtn": "ส่งออเดอร์",
                "modalReceiptTitle": "ใบเสร็จรับเงิน",
                "cafeNameReceipt": "บ้านพักครู คาเฟ่ 🏠",
                "receiptType": "ประเภท",
                "receiptTable": "โต๊ะ",
                "printReceiptBtn": "พิมพ์ใบเสร็จ",
                "closeBtn": "ปิด",
                "addToOrderSuccess": "เพิ่ม {itemName} เรียบร้อย",
                "removeFromOrderSuccess": "ลบ {itemName} เรียบร้อย",
                "noItemsSelected": "โปรดเลือกสินค้าอย่างน้อย 1 รายการ",
                "sendingOrder": "กำลังส่งข้อมูล...",
                "orderSuccess": "ส่งออเดอร์สำเร็จ 🎉",
                "orderFailed": "เกิดข้อผิดพลาด: {errorMessage}",
                "clearOrderConfirm": "ล้างรายการทั้งหมด?",
                "orderCleared": "ล้างรายการเรียบร้อย",
                "noMenuInCategory": "ไม่มีเมนูในหมวดหมู่นี้",
                "บาท": "บาท",
                "table1": "โต๊ะ 1",
                "table2": "โต๊ะ 2",
                "table3": "โต๊ะ 3",
                "table4": "โต๊ะ 4",
                "thankYou": "ขอบคุณที่ใช้บริการ!"
            },
            "en": {
                "appTitle": "Teacher's Home / Cafe 🧁☕️",
                "menuHeader": "Menu",
                "orderListHeader": "Order List",
                "allCategory": "All ✨",
                "drinkCategory": "Drinks ☕️",
                "foodCategory": "Food 🥪",
                "dessertCategory": "Desserts 🍰",
                "mainDishCategory": "Main Dishes 🍽️",
                "coffeeSubCategory": "Coffee ☕",
                "teaSubCategory": "Tea 🍵",
                "juiceSubCategory": "Juices 🥤",
                "otherDrinkSubCategory": "Others 🍹",
                "alcoholSubCategory": "Alcohol & Beer 🍻",
                "pizzaSubCategory": "Pizza 🍕",
                "spaghettiSubCategory": "Spaghetti 🍝",
                "steakSubCategory": "Steak 🥩",
                "thaiFoodSubCategory": "Thai Food 🍚",
                "cakesBakeriesSubCategory": "Cakes & Bakeries 🧁",
                "otherDessertSubCategory": "Others 🍬",
                "menuNameCol": "Menu",
                "priceCol": "Price",
                "qtyCol": "Quantity",
                "totalCol": "Total",
                "manageCol": "Manage",
                "grandTotal": "Grand Total",
                "orderTypeLabel": "Order Type",
                "eatHere": "Eat Here",
                "takeHome": "Take Home",
                "tableSelectLabel": "Select Table",
                "clearOrderBtn": "Clear Order",
                "sendOrderBtn": "Send Order",
                "modalReceiptTitle": "Receipt",
                "cafeNameReceipt": "Teacher's Home Cafe 🏠",
                "receiptType": "Type",
                "receiptTable": "Table",
                "printReceiptBtn": "Print Receipt",
                "closeBtn": "Close",
                "addToOrderSuccess": "Added {itemName} to order",
                "removeFromOrderSuccess": "Removed {itemName} from order",
                "noItemsSelected": "Please select at least 1 item",
                "sendingOrder": "Sending order...",
                "orderSuccess": "Order sent successfully 🎉",
                "orderFailed": "Error: {errorMessage}",
                "clearOrderConfirm": "Clear all items?",
                "orderCleared": "Order cleared",
                "noMenuInCategory": "No menu in this category",
                "บาท": "Baht",
                "table1": "Table 1",
                "table2": "Table 2",
                "table3": "Table 3",
                "table4": "Table 4",
                "thankYou": "Thank you for your order!"
            }
        };

        // ข้อมูลเมนู
        const menuItems = [
            // เครื่องดื่ม
            { id: 1, name: "กาแฟลาเต้", price: 40, category: "coffee", icon: "☕️" },
            { id: 2, name: "ชาเขียว", price: 35, category: "tea", icon: "🍵" },
            { id: 4, name: "น้ำส้มคั้น", price: 30, category: "juice", icon: "🥤" },
            { id: 39, name: "โกโก้ครีมมี่", price: 45, category: "otherDrink", icon: "🍫" },
            { id: 78, name: "เบียร์ช้าง", price: 90, category: "alcohol", icon: "🍺" },
            
            // อาหาร
            { id: 5, name: "แซนวิช", price: 45, category: "food", icon: "🥪" },
            { id: 8, name: "ครัวซองต์", price: 40, category: "food", icon: "🥐" },
            
            // ของหวาน
            { id: 3, name: "เค้กช็อกโกแลต", price: 55, category: "cakesBakeries", icon: "🧁" },
            { id: 6, name: "บราวนี่", price: 50, category: "cakesBakeries", icon: "🍫" },
            
            // อาหารหลัก
            { id: 9, name: "พิซซ่ามาการิต้า", price: 180, category: "pizza", icon: "🍕" },
            { id: 59, name: "สปาเก็ตตี้คาโบนาร่า", price: 150, category: "spaghetti", icon: "🍝" },
            { id: 49, name: "สเต็กพริกไทยดำ", price: 180, category: "steak", icon: "🥩" },
            { id: 64, name: "ผัดกะเพราไก่ไข่ดาว", price: 80, category: "thaiFood", icon: "🍚" }
        ];

        // ตัวแปรระบบ
        let currentLang = 'th';
        let currentActiveCategory = 'all';
        let currentActiveSubCategory = 'all';
        let orders = [];
        
        // อ้างอิงองค์ประกอบ HTML
        const menuListEl = document.getElementById('menuList');
        const orderTableBody = document.querySelector('#orderTable tbody');
        const totalAmountEl = document.getElementById('totalAmount');
        const statusMsg = document.getElementById('statusMsg');
        const sendOrderBtn = document.getElementById('sendOrderBtn');
        const clearOrderBtn = document.getElementById('clearOrderBtn');
        const categoryBtns = document.querySelectorAll('.category-btn');
        const subCategoryDrink = document.getElementById('subCategoryDrink');
        const subCategoryDessert = document.getElementById('subCategoryDessert');
        const subCategoryMainDish = document.getElementById('subCategoryMainDish');
        const allSubCategoryDivs = document.querySelectorAll('#subCategoryDrink, #subCategoryDessert, #subCategoryMainDish');
        const currentTimeEl = document.getElementById('current-time');
        const eatHereRadio = document.getElementById('eatHere');
        const takeHomeRadio = document.getElementById('takeHome');
        const tableSelectContainer = document.getElementById('tableSelectContainer');
        const tableNumberSelect = document.getElementById('tableNumber');

        // ฟังก์ชันเปลี่ยนภาษา
        function switchLanguage(lang) {
            currentLang = lang;
            updateUIForLanguage();
            renderMenu();
            renderOrders();
            updateCurrentTime();
        }

        // ฟังก์ชันดึงข้อความแปล
        function getTranslation(key, placeholders = {}) {
            let text = translations[currentLang][key] || key;
            for (const p in placeholders) {
                text = text.replace(`{${p}}`, placeholders[p]);
            }
            return text;
        }

        // อัปเดต UI ตามภาษา
        function updateUIForLanguage() {
            // อัปเดตข้อความทั้งหมดตามภาษา
            document.getElementById('appTitle').textContent = getTranslation('appTitle');
            document.getElementById('menuHeader').textContent = getTranslation('menuHeader');
            document.getElementById('orderListHeader').textContent = getTranslation('orderListHeader');
            
            // อัปเดตปุ่มหมวดหมู่
            document.querySelector('.category-btn[data-category="all"]').textContent = getTranslation('allCategory');
            document.querySelector('.category-btn[data-category="drink"]').textContent = getTranslation('drinkCategory');
            document.querySelector('.category-btn[data-category="food"]').textContent = getTranslation('foodCategory');
            document.querySelector('.category-btn[data-category="dessert"]').textContent = getTranslation('dessertCategory');
            document.querySelector('.category-btn[data-category="mainDish"]').textContent = getTranslation('mainDishCategory');
            
            // อัปเดตตาราง
            document.getElementById('colMenuName').textContent = getTranslation('menuNameCol');
            document.getElementById('colPrice').textContent = getTranslation('priceCol');
            document.getElementById('colQty').textContent = getTranslation('qtyCol');
            document.getElementById('colTotal').textContent = getTranslation('totalCol');
            document.getElementById('colManage').textContent = getTranslation('manageCol');
            document.getElementById('totalAmountLabel').textContent = getTranslation('grandTotal');
            
            // อัปเดตส่วนสั่งซื้อ
            document.getElementById('orderTypeHeader').textContent = getTranslation('orderTypeLabel');
            document.getElementById('orderTypeLabel').textContent = getTranslation('orderTypeLabel');
            document.getElementById('eatHereLabel').innerHTML = `${getTranslation('eatHere')} <span class="fs-4">🍽️</span>`;
            document.getElementById('takeHomeLabel').innerHTML = `${getTranslation('takeHome')} <span class="fs-4">🛍️</span>`;
            document.getElementById('tableSelectLabel').innerHTML = `${getTranslation('tableSelectLabel')} <span class="fs-4 ms-2">🪑</span>`;
            
            // อัปเดตปุ่ม
            document.getElementById('clearOrderBtn').innerHTML = `<i class="bi bi-trash"></i> ${getTranslation('clearOrderBtn')}`;
            document.getElementById('sendOrderBtn').innerHTML = `<i class="bi bi-send-check"></i> ${getTranslation('sendOrderBtn')}`;
            
            // อัปเดต Modal
            document.getElementById('receiptModalTitle').textContent = getTranslation('modalReceiptTitle');
            document.getElementById('cafeNameReceipt').textContent = getTranslation('cafeNameReceipt');
            document.getElementById('printReceiptBtn').innerHTML = `<i class="bi bi-printer"></i> ${getTranslation('printReceiptBtn')}`;
            document.getElementById('closeModalBtn').textContent = getTranslation('closeBtn');
        }

        // แสดงเมนู
        function renderMenu() {
            let filtered = [];
            
            if (currentActiveSubCategory === 'all') {
                if (currentActiveCategory === 'all') {
                    filtered = menuItems;
                } else if (currentActiveCategory === 'drink') {
                    filtered = menuItems.filter(item => ['coffee', 'tea', 'juice', 'otherDrink', 'alcohol'].includes(item.category));
                } else if (currentActiveCategory === 'food') {
                    filtered = menuItems.filter(item => item.category === 'food');
                } else if (currentActiveCategory === 'dessert') {
                    filtered = menuItems.filter(item => ['cakesBakeries', 'otherDessert'].includes(item.category));
                } else if (currentActiveCategory === 'mainDish') {
                    filtered = menuItems.filter(item => ['pizza', 'spaghetti', 'steak', 'thaiFood'].includes(item.category));
                }
            } else {
                filtered = menuItems.filter(item => item.category === currentActiveSubCategory);
            }
            
            menuListEl.innerHTML = filtered.length ? 
                filtered.map(item => `
                    <div class="menu-item" onclick="addOrder(${item.id})">
                        <div class="menu-icon">${item.icon}</div>
                        <div class="menu-name">${item.name}</div>
                        <div class="menu-price">${item.price} ${getTranslation('บาท')}</div>
                    </div>
                `).join('') : 
                `<div class="text-muted text-center py-3">${getTranslation('noMenuInCategory')}</div>`;
        }

        // เพิ่มรายการสั่งซื้อ
        window.addOrder = function(id) {
            const item = menuItems.find(i => i.id === id);
            const existing = orders.find(o => o.id === id);
            
            if (existing) {
                existing.qty++;
            } else {
                orders.push({...item, qty: 1});
            }
            
            renderOrders();
            showStatus(getTranslation('addToOrderSuccess', {itemName: item.name}), 'success');
        }

        // แสดงรายการสั่งซื้อ
        function renderOrders() {
            orderTableBody.innerHTML = '';
            let total = 0;
            
            orders.forEach(order => {
                const itemTotal = order.price * order.qty;
                total += itemTotal;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${order.name}</td>
                    <td>${order.price}</td>
                    <td>
                        <div class="input-group input-group-sm qty-input-group">
                            <button class="btn btn-outline-secondary" type="button" onclick="changeQty(${order.id}, -1)">
                                <i class="bi bi-dash-lg"></i>
                            </button>
                            <input type="text" class="form-control text-center" value="${order.qty}" readonly>
                            <button class="btn btn-outline-secondary" type="button" onclick="changeQty(${order.id}, 1)">
                                <i class="bi bi-plus-lg"></i>
                            </button>
                        </div>
                    </td>
                    <td>${itemTotal}</td>
                    <td><button class="btn btn-danger btn-sm" onclick="removeOrder(${order.id})"><i class="bi bi-x-lg"></i></button></td>
                `;
                orderTableBody.appendChild(row);
            });
            
            totalAmountEl.textContent = total;
        }

        // เปลี่ยนจำนวน
        window.changeQty = function(id, delta) {
            const order = orders.find(o => o.id === id);
            if (order) {
                order.qty += delta;
                if (order.qty < 1) order.qty = 1;
                renderOrders();
            }
        }

        // ลบรายการ
        window.removeOrder = function(id) {
            const index = orders.findIndex(o => o.id === id);
            if (index > -1) {
                const itemName = orders[index].name;
                orders.splice(index, 1);
                renderOrders();
                showStatus(getTranslation('removeFromOrderSuccess', {itemName}), 'success');
            }
        }

        // แสดงสถานะ
        function showStatus(msg, type) {
            statusMsg.textContent = msg;
            statusMsg.className = `alert alert-${type}`;
            statusMsg.style.display = 'block';
            setTimeout(() => statusMsg.style.display = 'none', 3000);
        }

        // ส่งออเดอร์
        function sendOrder() {
            if (!orders.length) {
                showStatus(getTranslation('noItemsSelected'), 'danger');
                return;
            }
            
            showStatus(getTranslation('sendingOrder'), 'info');
            
            // สร้างใบเสร็จ
            generateReceipt();
            
            // ล้างรายการ
            orders = [];
            renderOrders();
            showStatus(getTranslation('orderSuccess'), 'success');
        }

        // สร้างใบเสร็จ
        function generateReceipt() {
            const orderType = document.querySelector('input[name="orderType"]:checked').value;
            const tableNumber = tableNumberSelect.value;
            
            // แปลงสำหรับแสดงผล
            const displayOrderType = orderType === 'นั่งทานที่ร้าน' ? getTranslation('eatHere') : getTranslation('takeHome');
            const displayTableNumber = tableNumber === 'โต๊ะ 1' ? getTranslation('table1') :
                                     tableNumber === 'โต๊ะ 2' ? getTranslation('table2') :
                                     tableNumber === 'โต๊ะ 3' ? getTranslation('table3') :
                                     tableNumber === 'โต๊ะ 4' ? getTranslation('table4') : tableNumber;
            
            // รายละเอียดใบเสร็จ
            let receiptDetailsHtml = `
                <p><strong>${getTranslation('receiptType')}:</strong> ${displayOrderType} ${orderType === 'นั่งทานที่ร้าน' ? '🍽️' : '🛍️'}</p>
            `;
            
            if (orderType === 'นั่งทานที่ร้าน') {
                receiptDetailsHtml += `<p><strong>${getTranslation('receiptTable')}:</strong> ${displayTableNumber} 🪑</p>`;
            }
            
            document.getElementById('receiptDetails').innerHTML = receiptDetailsHtml;
            
            // ตารางใบเสร็จ
            let html = `
                <table class="table">
                    <thead>
                        <tr>
                            <th>${getTranslation('menuNameCol')}</th>
                            <th>${getTranslation('qtyCol')}</th>
                            <th>${getTranslation('priceCol')}</th>
                            <th>${getTranslation('totalCol')}</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            let total = 0;
            orders.forEach(order => {
                const itemTotal = order.price * order.qty;
                total += itemTotal;
                html += `
                    <tr>
                        <td>${order.name}</td>
                        <td>${order.qty}</td>
                        <td>${order.price}</td>
                        <td>${itemTotal}</td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                    <tfoot>
                        <tr>
                            <th colspan="3">${getTranslation('grandTotal')}</th>
                            <th>${total} ${getTranslation('บาท')}</th>
                        </tr>
                    </tfoot>
                </table>
            `;
            
            document.getElementById('receiptTable').innerHTML = html;
            document.getElementById('qrImage').src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${getTranslation('cafeNameReceipt')}: ${total} ${getTranslation('บาท')}`;
            
            // แสดงข้อความขอบคุณ
            document.querySelector('#receiptContent p.text-center').textContent = getTranslation('thankYou');
            
            // แสดง Modal
            new bootstrap.Modal(document.getElementById('receiptModal')).show();
        }

        // พิมพ์ใบเสร็จ
        function printReceipt() {
            const printContent = document.getElementById('receiptContent').innerHTML;
            const originalContent = document.body.innerHTML;
            
            document.body.innerHTML = printContent;
            window.print();
            document.body.innerHTML = originalContent;
        }

        // ล้างรายการ
        function clearOrder() {
            if (orders.length && confirm(getTranslation('clearOrderConfirm'))) {
                orders = [];
                renderOrders();
                showStatus(getTranslation('orderCleared'), 'success');
            }
        }

        // อัปเดตเวลาปัจจุบัน
        function updateCurrentTime() {
            const now = new Date();
            currentTimeEl.textContent = now.toLocaleString(
                currentLang === 'th' ? 'th-TH' : 'en-US',
                { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric', 
                    hour: '2-digit', 
                    minute: '2-digit', 
                    second: '2-digit' 
                }
            );
        }

        // เปลี่ยนธีมสี
        document.getElementById('themeToggle').addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
        });

        // ตั้งค่า Dark Mode อัตโนมัติตามเวลา
        (function() {
            const hour = new Date().getHours();
            if (hour >= 18 || hour < 6) {
                document.body.classList.add('dark-mode');
            }
        })();

        // ตั้งค่าปุ่มหมวดหมู่
        categoryBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                categoryBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                allSubCategoryDivs.forEach(div => div.classList.add('d-none'));
                
                currentActiveCategory = this.dataset.category;
                currentActiveSubCategory = 'all';
                
                if (currentActiveCategory === 'drink') {
                    subCategoryDrink.classList.remove('d-none');
                } else if (currentActiveCategory === 'dessert') {
                    subCategoryDessert.classList.remove('d-none');
                } else if (currentActiveCategory === 'mainDish') {
                    subCategoryMainDish.classList.remove('d-none');
                }
                
                renderMenu();
            });
        });

        // ตั้งค่าปุ่มหมวดหมู่ย่อย
        allSubCategoryDivs.forEach(div => {
            div.querySelectorAll('.sub-category-btn').forEach(subBtn => {
                subBtn.addEventListener('click', function() {
                    document.querySelectorAll('.sub-category-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentActiveSubCategory = this.dataset.category;
                    renderMenu();
                });
            });
        });

        // ตั้งค่าปุ่มเลือกโต๊ะ
        eatHereRadio.addEventListener('change', () => {
            tableSelectContainer.style.display = eatHereRadio.checked ? 'block' : 'none';
        });

        takeHomeRadio.addEventListener('change', () => {
            tableSelectContainer.style.display = takeHomeRadio.checked ? 'none' : 'block';
        });

        // ตั้งค่าปุ่มดำเนินการ
        sendOrderBtn.addEventListener('click', sendOrder);
        clearOrderBtn.addEventListener('click', clearOrder);

        // เริ่มต้นระบบ
        updateUIForLanguage();
        renderMenu();
        updateCurrentTime();
        setInterval(updateCurrentTime, 1000);
    </script>
</body>
</html>
