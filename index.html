<!DOCTYPE html>
<html lang="th">

<head>
    <base target="_top">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà üèïÔ∏è‚òï</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&family=Charm:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" href="https://i.imgur.com/your-campfire-favicon.png" type="image/png"> 
    <style>
        /* ======= ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á ====== */
        body {
            font-family: 'Sarabun', sans-serif;
            background: linear-gradient(to bottom, #e6f5e6, #d9edda);
            color: #3e2723;
            padding: 20px;
            position: relative;
            min-height: 100vh; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ body ‡∏™‡∏π‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
            background-size: 400px;
            opacity: 0.1;
            z-index: 0;
            pointer-events: none;
        }

        h2, h4, .modal-title {
            font-family: 'Charm', cursive; /* ‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏ô‡∏ï‡πå Charm ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö heading */
            font-weight: 700;
            color: #5d4037; /* ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏Ç‡πâ‡∏° */
        }

        .card {
            border: none;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* ‡∏õ‡∏£‡∏±‡∏ö shadow ‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•‡∏Ç‡∏∂‡πâ‡∏ô */
            border-radius: 15px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
            background: rgba(255, 255, 255, 0.88); /* ‡πÄ‡∏û‡∏¥‡πà‡∏° opacity ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
            backdrop-filter: blur(8px); /* ‡πÄ‡∏û‡∏¥‡πà‡∏° blur ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
            border: 1px solid #d1c7b7;
        }

        .card-header {
            background: linear-gradient(90deg, #8bc34a, #689f38) !important;
            color: white !important;
            font-weight: 600;
            border-top-left-radius: 15px !important; /* ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö card border-radius */
            border-top-right-radius: 15px !important;
            padding: 1rem 1.5rem; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° padding */
        }

        .order-type-header {
            background: linear-gradient(90deg, #5d4037, #8d6e63) !important; /* ‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß */
            color: white !important;
            border-top-left-radius: 15px !important;
            border-top-right-radius: 15px !important;
            padding: 1rem 1.5rem;
        }

        .card-body {
            padding: 1.5rem; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° padding ‡πÉ‡∏ô card-body */
        }

        .menu-item {
            background: #fff;
            border: 1px solid #d7ccc8;
            margin-bottom: 10px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
            border-radius: 12px;
            padding: 15px 20px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° padding */
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.07); /* ‡∏õ‡∏£‡∏±‡∏ö shadow */
            transition: all 0.3s ease; /* ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ transition */
            cursor: pointer;
            display: flex; /* ‡πÉ‡∏ä‡πâ flexbox ‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á icon ‡∏Å‡∏±‡∏ö text */
            align-items: center;
        }

        .menu-item:hover {
            background: #f1f8e9;
            transform: translateY(-3px); /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.12);
        }

        .menu-item .menu-name {
            flex-grow: 1; /* ‡πÉ‡∏´‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà */
            font-size: 1.1rem;
            font-weight: 500;
        }

        .menu-item .menu-price {
            font-weight: 600;
            color: #689f38; /* ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ */
            margin-left: 15px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π */
        }

        /* ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ô‡∏ß‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á */
        .btn-outline-primary {
            color: #5d4037;
            border-color: #5d4037;
            font-weight: 500;
            border-radius: 8px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏° */
            padding: 8px 15px;
        }

        .btn-outline-primary:hover,
        .btn-outline-primary.active {
            background-color: #5d4037;
            color: white;
            border-color: #5d4037;
        }

        .btn-outline-secondary {
            color: #795548; /* ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏≠‡πà‡∏≠‡∏ô‡∏•‡∏á */
            border-color: #795548;
            border-radius: 8px;
            padding: 6px 12px;
        }

        .btn-outline-secondary:hover,
        .btn-outline-secondary.active {
            background-color: #795548;
            color: white;
            border-color: #795548;
        }


        /* Dark Mode ‡πÅ‡∏ô‡∏ß‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á */
        body.dark-mode {
            background-color: #1a2a1a;
            background-image:
                url('https://www.transparenttextures.com/patterns/dark-wood.png'),
                url('https://www.transparenttextures.com/patterns/stardust.png');
            color: #e0e7eb;
        }

        body.dark-mode h2, body.dark-mode h4, body.dark-mode .modal-title {
            color: #e0e7eb; /* ‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° heading ‡πÉ‡∏ô dark mode */
        }

        body.dark-mode .card {
            background: rgba(40, 50, 40, 0.95); /* ‡πÄ‡∏û‡∏¥‡πà‡∏° opacity */
            border-color: #5d4037;
        }

        body.dark-mode .card-header {
            background: linear-gradient(90deg, #385e2b, #2b4a20) !important; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏µ header ‡πÉ‡∏ô dark mode */
        }

        body.dark-mode .order-type-header {
            background: linear-gradient(90deg, #4a2d26, #6b4c42) !important; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏µ header ‡πÉ‡∏ô dark mode */
        }

        body.dark-mode .menu-item {
            background: rgba(50, 60, 50, 0.85);
            border-color: #5d4037;
            color: #e0e7eb;
        }

        body.dark-mode .menu-item:hover {
            background: rgba(70, 80, 70, 0.7);
        }

        body.dark-mode .menu-item .menu-price {
             color: #a2cd78; /* ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô‡∏•‡∏á‡πÉ‡∏ô dark mode */
        }

        body.dark-mode .table-bordered thead th,
        body.dark-mode .table-bordered tbody,
        body.dark-mode .table-bordered tfoot {
            color: #e0e7eb;
        }

        body.dark-mode .table-dark {
            background-color: #3e2723 !important; /* Darker header for table in dark mode */
        }

        body.dark-mode .btn-outline-primary {
            color: #a2cd78;
            border-color: #a2cd78;
        }
        body.dark-mode .btn-outline-primary:hover,
        body.dark-mode .btn-outline-primary.active {
            background-color: #a2cd78;
            color: #1a2a1a;
            border-color: #a2cd78;
        }

        body.dark-mode .btn-outline-secondary {
            color: #d7ccc8;
            border-color: #d7ccc8;
        }
        body.dark-mode .btn-outline-secondary:hover,
        body.dark-mode .btn-outline-secondary.active {
            background-color: #d7ccc8;
            color: #3e2723;
            border-color: #d7ccc8;
        }

        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÑ‡∏ü‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå */
        .campfire-effect {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
            height: 120px;
            background: radial-gradient(circle, rgba(255, 165, 0, 0.7) 0%, rgba(255, 69, 0, 0.4) 50%, transparent 70%);
            border-radius: 50%;
            filter: blur(8px); /* ‡πÄ‡∏û‡∏¥‡πà‡∏° blur */
            box-shadow: 0 0 20px 8px rgba(255, 140, 0, 0.4), 0 0 40px 15px rgba(255, 69, 0, 0.2); /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏™‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡∏£‡∏≠‡∏á */
            z-index: 0;
            animation: flicker 3s infinite alternate;
        }

        @keyframes flicker {
            0%, 100% {
                opacity: 0.8;
                transform: translateX(-50%) scale(1);
            }
            25% {
                opacity: 0.95; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
                transform: translateX(-50%) scale(1.06); /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏≤‡∏¢ */
            }
            50% {
                opacity: 0.75;
                transform: translateX(-50%) scale(0.96);
            }
            75% {
                opacity: 0.9;
                transform: translateX(-50%) scale(1.04);
            }
        }

        /* Language toggle positioning */
        .language-toggle-buttons {
            position: absolute;
            top: 15px; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á */
            right: 15px;
            z-index: 10;
        }

        #themeToggle {
            position: absolute;
            top: 15px; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á */
            left: 15px;
            z-index: 10;
            border-radius: 50%; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏° */
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #categoryFilter button {
            margin-right: 8px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á */
            margin-bottom: 8px;
        }

        #subCategoryDrink, #subCategoryDessert, #subCategoryMainDish {
            padding-left: 15px; /* ‡πÄ‡∏¢‡∏∑‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
            border-left: 2px solid rgba(104, 159, 56, 0.5); /* ‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏•‡πá‡∏Å‡πÜ */
            margin-top: 10px !important;
            padding-top: 5px;
            padding-bottom: 5px;
        }

        body.dark-mode #subCategoryDrink, 
        body.dark-mode #subCategoryDessert, 
        body.dark-mode #subCategoryMainDish {
            border-left-color: rgba(162, 205, 120, 0.5);
        }

        /* Responsive adjustments */
        @media (max-width: 767.98px) {
            .language-toggle-buttons, #themeToggle {
                position: static;
                margin-bottom: 15px;
            }
            .container-fluid {
                padding: 10px;
            }
            .card {
                margin-bottom: 15px;
            }
            #appTitle {
                margin-top: 60px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà absolute */
            }
        }
    </style>
</head>

<body>
    <button id="themeToggle" class="btn btn-light">
        <i class="bi bi-moon-stars-fill"></i>
    </button>

    <div class="language-toggle-buttons">
        <button class="btn btn-outline-secondary btn-sm" onclick="switchLanguage('th')">üáπüá≠</button>
        <button class="btn btn-outline-secondary btn-sm" onclick="switchLanguage('en')">üá¨üáß</button>
    </div>
    <div class="campfire-effect"></div>

    <div class="container-fluid">
        <div class="row mb-4">
            <div class="col-12">
                <h2 class="text-center" id="appTitle">‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà üèïÔ∏è‚òï</h2>
                <div class="text-center text-muted" id="current-time"></div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-5">
                <div class="card mb-3">
                    <div class="card-header"><h4 class="mb-0" id="menuHeader">‡πÄ‡∏°‡∏ô‡∏π</h4></div>
                    <div class="card-body">
                        <div id="categoryFilter" class="mb-3 d-flex flex-wrap">
                            <button class="btn btn-sm btn-outline-primary category-btn active" data-category="all"></button>
                            <button class="btn btn-sm btn-outline-primary category-btn" data-category="drink"></button>
                            <button class="btn btn-sm btn-outline-primary category-btn" data-category="food"></button>
                            <button class="btn btn-sm btn-outline-primary category-btn" data-category="dessert"></button>
                            <button class="btn btn-sm btn-outline-primary category-btn" data-category="mainDish"></button>
                            <button class="btn btn-sm btn-outline-primary category-btn" data-category="game"></button>

                            <div id="subCategoryDrink" class="d-none mt-2 w-100">
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="coffee"></button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="tea"></button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="juice"></button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="otherDrink"></button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="alcohol"></button>
                            </div>
                            <div id="subCategoryDessert" class="d-none mt-2 w-100">
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="cakesBakeries"></button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="otherDessert"></button>
                            </div>
                            <div id="subCategoryMainDish" class="d-none mt-2 w-100">
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="pizza"></button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="spaghetti"></button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="steak"></button>
                                <button class="btn btn-sm btn-outline-secondary sub-category-btn" data-category="thaiFood"></button>
                            </div>
                        </div>
                        <div id="menuList" class="list-group"></div>
                        <p id="noMenuMsg" class="text-muted text-center mt-3" style="display:none;"></p>
                    </div>
                </div>
            </div>

            <div class="col-md-7">
                <div class="card mb-3">
                    <div class="card-header"><h4 class="mb-0" id="orderListHeader">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h4></div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped" id="orderTable">
                                <thead class="table-dark">
                                    <tr>
                                        <th id="colMenuName">‡πÄ‡∏°‡∏ô‡∏π</th>
                                        <th id="colPrice">‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                                        <th id="colQty">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                                        <th id="colTotal">‡∏£‡∏ß‡∏°</th>
                                        <th id="colManage">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                                <tfoot>
                                    <tr>
                                        <th colspan="3" class="text-end" id="totalAmountLabel">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</th>
                                        <th id="totalAmount">0</th>
                                        <th></th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header order-type-header d-flex align-items-center justify-content-center">
                        <h4 class="mb-0" id="orderTypeHeader">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h4>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label" id="orderTypeLabel"><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</strong></label>
                            <div class="form-check d-flex align-items-center mb-2">
                                <input class="form-check-input me-2" type="radio" name="orderType" id="eatHere" value="eatHere" checked>
                                <label class="form-check-label fs-5" for="eatHere" id="eatHereLabel">
                                    ‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô <span class="fs-4">üçΩÔ∏è</span>
                                </label>
                            </div>
                            <div class="form-check d-flex align-items-center">
                                <input class="form-check-input me-2" type="radio" name="orderType" id="takeHome" value="takeHome">
                                <label class="form-check-label fs-5" for="takeHome" id="takeHomeLabel">
                                    ‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô <span class="fs-4">üõçÔ∏è</span>
                                </label>
                            </div>
                            <div id="tableSelectContainer" class="mt-3">
                                <label for="tableNumber" class="form-label d-flex align-items-center fs-5" id="tableSelectLabel">
                                    ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞ <span class="fs-4 ms-2">ü™ë</span>
                                </label>
                                <select class="form-select form-select-lg" id="tableNumber">
                                    <option value="table1">‡πÇ‡∏ï‡πä‡∏∞ 1</option>
                                    <option value="table2">‡πÇ‡∏ï‡πä‡∏∞ 2</option>
                                    <option value="table3">‡πÇ‡∏ï‡πä‡∏∞ 3</option>
                                    <option value="table4">‡πÇ‡∏ï‡πä‡∏∞ 4</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-3 d-flex justify-content-between">
                            <button class="btn btn-danger" id="clearOrderBtn"><i class="bi bi-trash"></i> <span id="clearOrderBtnText">‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span></button>
                            <button class="btn btn-primary" id="sendOrderBtn"><i class="bi bi-send-check"></i> <span id="sendOrderBtnText">‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</span></button>
                        </div>
                        <div id="statusMsg" class="mt-3 alert" style="display:none;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="receiptModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="receiptModalTitle">‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="receiptContent">
                    <h6 class="text-center" id="cafeNameReceipt">‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà üèïÔ∏è</h6>
                    <div id="receiptDetails" class="mb-3"></div>
                    <div id="receiptTable"></div>
                    <p class="text-center mt-4" id="thankYouMessage"></p>
                    <div class="text-center mt-3"><img id="qrImage" src="" width="150" /></div>
                </div>
                <div class="modal-footer">
                    <button onclick="printReceipt()" class="btn btn-outline-secondary" id="printReceiptBtn"><i
                            class="bi bi-printer"></i> <span id="printReceiptBtnText">‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</span></button>
                    <button class="btn btn-secondary" data-bs-dismiss="modal" id="closeModalBtn"><span id="closeBtnText">‡∏õ‡∏¥‡∏î</span></button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const translations = {
            "th": {
                "appTitle": "‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà üèïÔ∏è‚òï",
                "cafeNameReceipt": "‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà üèïÔ∏è",
                "menuHeader": "‡πÄ‡∏°‡∏ô‡∏π",
                "orderListHeader": "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠",
                "allCategory": "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚ú®",
                "drinkCategory": "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏° ‚òïÔ∏è",
                "foodCategory": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ü•™",
                "dessertCategory": "‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô üç∞",
                "mainDishCategory": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å üçΩÔ∏è",
                "gameCategory": "‡πÄ‡∏Å‡∏° üéÆ", // New category for games
                "coffeeSubCategory": "‡∏Å‡∏≤‡πÅ‡∏ü ‚òï",
                "teaSubCategory": "‡∏ä‡∏≤ üçµ",
                "juiceSubCategory": "‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ ü•§",
                "otherDrinkSubCategory": "‡∏≠‡∏∑‡πà‡∏ô‡πÜ üçπ",
                "alcoholSubCategory": "‡πÄ‡∏´‡∏•‡πâ‡∏≤-‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå üçª",
                "pizzaSubCategory": "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤ üçï",
                "spaghettiSubCategory": "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ üçù",
                "steakSubCategory": "‡∏™‡πÄ‡∏ï‡πá‡∏Å ü•©",
                "thaiFoodSubCategory": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢ üçö",
                "cakesBakeriesSubCategory": "‡πÄ‡∏Ñ‡πâ‡∏Å & ‡πÄ‡∏ö‡πÄ‡∏Å‡∏≠‡∏£‡∏µ‡πà üßÅ",
                "otherDessertSubCategory": "‡∏≠‡∏∑‡πà‡∏ô‡πÜ üç¨",
                "menuNameCol": "‡πÄ‡∏°‡∏ô‡∏π",
                "priceCol": "‡∏£‡∏≤‡∏Ñ‡∏≤",
                "qtyCol": "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",
                "totalCol": "‡∏£‡∏ß‡∏°",
                "manageCol": "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£",
                "grandTotal": "‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",
                "orderTypeLabel": "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå",
                "eatHere": "‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô",
                "takeHome": "‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô",
                "tableSelectLabel": "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞",
                "clearOrderBtn": "‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",
                "sendOrderBtn": "‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå",
                "modalReceiptTitle": "‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",
                "receiptType": "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó",
                "receiptTable": "‡πÇ‡∏ï‡πä‡∏∞",
                "printReceiptBtn": "‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à",
                "closeBtn": "‡∏õ‡∏¥‡∏î",
                "addToOrderSuccess": "‡πÄ‡∏û‡∏¥‡πà‡∏° {itemName} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",
                "removeFromOrderSuccess": "‡∏•‡∏ö {itemName} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",
                "noItemsSelected": "‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",
                "sendingOrder": "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...",
                "orderSuccess": "‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ",
                "orderFailed": "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: {errorMessage}",
                "clearOrderConfirm": "‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?",
                "orderCleared": "‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",
                "noMenuInCategory": "‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ",
                "‡∏ö‡∏≤‡∏ó": "‡∏ö‡∏≤‡∏ó",
                "table1": "‡πÇ‡∏ï‡πä‡∏∞ 1",
                "table2": "‡πÇ‡∏ï‡πä‡∏∞ 2",
                "table3": "‡πÇ‡∏ï‡πä‡∏∞ 3",
                "table4": "‡πÇ‡∏ï‡πä‡∏∞ 4",
                "orderReceipt": "‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",
                "thankYou": "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£!",
                "item": "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",
                "qty": "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",
                "total": "‡∏£‡∏ß‡∏°",
                "grandTotalReceipt": "‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥",
                "receiptOrderType": "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå",
                "receiptTableNumber": "‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ï‡πä‡∏∞",
                "game": "‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°" // Translation for "Play Game" button
            },
            "en": {
                "appTitle": "Camp Cafe üèïÔ∏è‚òï",
                "cafeNameReceipt": "Camp Cafe üèïÔ∏è",
                "menuHeader": "Menu",
                "orderListHeader": "Order List",
                "allCategory": "All ‚ú®",
                "drinkCategory": "Drinks ‚òïÔ∏è",
                "foodCategory": "Food ü•™",
                "dessertCategory": "Desserts üç∞",
                "mainDishCategory": "Main Dishes üçΩÔ∏è",
                "gameCategory": "Games üéÆ", // New category for games
                "coffeeSubCategory": "Coffee ‚òï",
                "teaSubCategory": "Tea üçµ",
                "juiceSubCategory": "Juices ü•§",
                "otherDrinkSubCategory": "Others üçπ",
                "alcoholSubCategory": "Alcohol & Beer üçª",
                "pizzaSubCategory": "Pizza üçï",
                "spaghettiSubCategory": "Spaghetti üçù",
                "steakSubCategory": "Steak ü•©",
                "thaiFoodSubCategory": "Thai Food üçö",
                "cakesBakeriesSubCategory": "Cakes & Bakeries üßÅ",
                "otherDessertSubCategory": "Others üç¨",
                "menuNameCol": "Menu",
                "priceCol": "Price",
                "qtyCol": "Quantity",
                "totalCol": "Total",
                "manageCol": "Manage",
                "grandTotal": "Grand Total",
                "orderTypeLabel": "Order Type",
                "eatHere": "Eat Here",
                "takeHome": "Take Home",
                "tableSelectLabel": "Select Table",
                "clearOrderBtn": "Clear Order",
                "sendOrderBtn": "Send Order",
                "modalReceiptTitle": "Receipt",
                "receiptType": "Type",
                "receiptTable": "Table",
                "printReceiptBtn": "Print Receipt",
                "closeBtn": "Close",
                "addToOrderSuccess": "Added {itemName} to order",
                "removeFromOrderSuccess": "Removed {itemName} from order",
                "noItemsSelected": "Please select at least 1 item",
                "sendingOrder": "Sending order...",
                "orderSuccess": "Order sent successfully üéâ",
                "orderFailed": "Error: {errorMessage}",
                "clearOrderConfirm": "Clear all items?",
                "orderCleared": "Order cleared",
                "noMenuInCategory": "No menu in this category",
                "‡∏ö‡∏≤‡∏ó": "Baht",
                "table1": "Table 1",
                "table2": "Table 2",
                "table3": "Table 3",
                "table4": "Table 4",
                "orderReceipt": "Order Receipt",
                "thankYou": "Thank you for your order!",
                "item": "Item",
                "qty": "Qty",
                "total": "Total",
                "grandTotalReceipt": "Grand Total",
                "receiptOrderType": "Order Type",
                "receiptTableNumber": "Table Number",
                "game": "Play Game" // Translation for "Play Game" button
            }
        };

        let currentLang = localStorage.getItem('cafeLanguage') || 'th'; // Load language from localStorage
        let currentActiveCategory = localStorage.getItem('cafeActiveCategory') || 'all';
        let currentActiveSubCategory = localStorage.getItem('cafeActiveSubCategory') || 'all';

        const menuItems = [
            // Game item
            { id: 999, name: "Pizza Maker WOI (‡πÄ‡∏Å‡∏°‡∏ó‡∏≥‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤)", price: 0, category: "game", icon: "üéÆ", isGame: true, gameUrl: "https://th.crazygames.com/%E0%B9%80%E0%B8%81%E0%B8%A1/pizza-maker-woi" },

            // ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏° (Drinks)
            { id: 1, name: "‡∏Å‡∏≤‡πÅ‡∏ü‡∏•‡∏≤‡πÄ‡∏ï‡πâ", price: 40, category: "coffee", icon: "‚òïÔ∏è" },
            { id: 42, name: "‡∏Ñ‡∏≤‡∏õ‡∏π‡∏ä‡∏¥‡πÇ‡∏ô‡πà‡∏Ñ‡∏•‡∏≤‡∏™‡∏™‡∏¥‡∏Å (Classic Cappuccino)", price: 50, category: "coffee", icon: "‚òï" },
            { id: 44, name: "‡πÄ‡∏≠‡∏™‡πÄ‡∏õ‡∏£‡∏™‡πÇ‡∏ã‡πà‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå‡∏ï‡∏£‡πâ‡∏≤ (Espresso Extra)", price: 40, category: "coffee", icon: "‚òï" },
            { id: 46, name: "‡∏Å‡∏≤‡πÅ‡∏ü‡∏ô‡∏°‡∏™‡∏î (Fresh Milk Coffee)", price: 45, category: "coffee", icon: "ü•õ" },
            { id: 41, name: "‡∏°‡πá‡∏≠‡∏Ñ‡∏Ñ‡πà‡∏≤‡πÅ‡∏°‡πá‡∏Å‡∏ã‡πå (Mocha Max)", price: 60, category: "coffee", icon: "‚òï" },
            { id: 40, name: "‡∏•‡∏≤‡πÄ‡∏ï‡πâ‡∏•‡∏≤‡πÄ‡∏ß‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå (Lavender Latte)", price: 55, category: "coffee", icon: "üíú" },
            { id: 100, name: "‡∏Å‡∏≤‡πÅ‡∏ü‡πÅ‡∏Ñ‡πâ‡∏°‡∏õ‡πå‡πÑ‡∏ü‡∏£‡πå", price: 45, category: "coffee", icon: "üî•" },

            { id: 2, name: "‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß", price: 35, category: "tea", icon: "üçµ" },
            { id: 43, name: "‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏°‡∏±‡∏ó‡∏â‡∏∞ (Matcha Green Tea)", price: 45, category: "tea", icon: "üçµ" },
            { id: 45, name: "‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏¢‡πá‡∏ô (Thai Iced Tea)", price: 40, category: "tea", icon: "üßã" },
            { id: 7, name: "‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢", price: 35, category: "tea", icon: "üßã" },
            { id: 47, name: "‡∏Æ‡∏±‡∏ô‡∏ô‡∏µ‡πà‡πÄ‡∏•‡∏°‡∏≠‡∏ô‡∏ó‡∏µ (Honey Lemon Tea)", price: 35, category: "tea", icon: "üçã" },
            { id: 48, name: "‡∏ä‡∏≤‡∏≠‡∏π‡πà‡∏´‡∏•‡∏á‡∏£‡πâ‡∏≠‡∏ô (Hot Oolong Tea)", price: 30, category: "tea", icon: "üçµ" },
            { id: 101, name: "‡∏ä‡∏≤‡∏°‡∏¥‡∏ô‡∏ï‡πå‡∏õ‡πà‡∏≤", price: 40, category: "tea", icon: "üåø" },

            { id: 4, name: "‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°‡∏Ñ‡∏±‡πâ‡∏ô", price: 30, category: "juice", icon: "ü•§" },
            { id: 102, name: "‡∏™‡∏°‡∏π‡∏ó‡∏ï‡∏µ‡πâ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡∏õ‡πà‡∏≤", price: 55, category: "juice", icon: "üçì" },

            { id: 39, name: "‡πÇ‡∏Å‡πÇ‡∏Å‡πâ‡∏Ñ‡∏£‡∏µ‡∏°‡∏°‡∏µ‡πà (Cocoa Creamy)", price: 45, category: "otherDrink", icon: "üç´" },

            // **‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π ‡πÄ‡∏´‡∏•‡πâ‡∏≤-‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå**
            { id: 78, name: "‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡∏ä‡πâ‡∏≤‡∏á", price: 90, category: "alcohol", icon: "üç∫" },
            { id: 79, name: "‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡∏•‡∏µ‡πÇ‡∏≠", price: 90, category: "alcohol", icon: "üç∫" },
            { id: 80, name: "‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡∏™‡∏¥‡∏á‡∏´‡πå", price: 100, category: "alcohol", icon: "üç∫" },
            { id: 81, name: "‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡πÑ‡∏Æ‡πÄ‡∏ô‡πÄ‡∏Å‡πâ‡∏ô", price: 120, category: "alcohol", icon: "üç∫" },
            { id: 82, name: "‡∏ß‡∏¥‡∏™‡∏Å‡∏µ‡πâ (‡πÅ‡∏Å‡πâ‡∏ß)", price: 150, category: "alcohol", icon: "ü•É" },
            { id: 83, name: "‡πÄ‡∏´‡∏•‡πâ‡∏≤‡∏Ç‡∏≤‡∏ß (‡∏ä‡πá‡∏≠‡∏ï)", price: 60, category: "alcohol", icon: "üç∂" },
            { id: 84, name: "‡∏Ñ‡πá‡∏≠‡∏Å‡πÄ‡∏ó‡∏• ‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß (Coconut Cocktail)", price: 180, category: "alcohol", icon: "üçπ" },

            // ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Food) - ‡πÉ‡∏ä‡πâ category: "food"
            { id: 5, name: "‡πÅ‡∏ã‡∏ô‡∏ß‡∏¥‡∏ä", price: 45, category: "food", icon: "ü•™" },
            { id: 8, name: "‡∏Ñ‡∏£‡∏±‡∏ß‡∏ã‡∏≠‡∏á‡∏ï‡πå", price: 40, category: "food", icon: "ü•ê" },
            { id: 103, name: "‡πÅ‡∏ã‡∏ô‡∏ß‡∏¥‡∏ä‡πÅ‡∏Ñ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á", price: 60, category: "food", icon: "ü•™" },

            // ‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô (Desserts)
            { id: 3, name: "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏ä‡πá‡∏≠‡∏Å‡πÇ‡∏Å‡πÅ‡∏•‡∏ï", price: 55, category: "cakesBakeries", icon: "üßÅ" },
            { id: 6, name: "‡∏ö‡∏£‡∏≤‡∏ß‡∏ô‡∏µ‡πà", price: 50, category: "cakesBakeries", icon: "üç´" },
            { id: 24, name: "‡∏ö‡πâ‡∏≤‡∏ô‡∏Ç‡∏ô‡∏°‡∏´‡∏ß‡∏≤‡∏ô Sweet Home Bakery", price: 65, category: "cakesBakeries", icon: "üç∞" },
            { id: 25, name: "‡∏Ç‡∏ô‡∏°‡∏≠‡∏ö‡∏£‡∏±‡∏Å Love Bake", price: 70, category: "cakesBakeries", icon: "üíñ" },
            { id: 26, name: "‡∏Ñ‡∏£‡∏±‡∏ß‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô Warm Oven", price: 60, category: "cakesBakeries", icon: "üç™" },
            { id: 27, name: "‡∏´‡∏≠‡∏°‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏Ç‡∏ô‡∏° Aroma Bakery", price: 75, category: "cakesBakeries", icon: "üçû" },
            { id: 28, name: "‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏≠‡∏ö‡∏≠‡∏ß‡∏• Cozy Crust", price: 68, category: "cakesBakeries", icon: "ü•®" },
            { id: 29, name: "‡∏Ç‡∏ô‡∏°‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏ß‡∏ô Garden Sweets", price: 55, category: "cakesBakeries", icon: "üå≥" },
            { id: 30, name: "‡∏Ç‡∏ô‡∏°‡∏´‡∏ß‡∏≤‡∏ô‡πÉ‡∏à Sweetheart Treats", price: 72, category: "cakesBakeries", icon: "üç¨" },
            { id: 31, name: "‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå‡∏Ç‡∏ô‡∏° Heaven Bakery", price: 80, category: "cakesBakeries", icon: "üòá" },
            { id: 32, name: "‡πÄ‡∏ï‡∏≤‡∏≠‡∏ö‡∏™‡∏∏‡∏Ç‡πÉ‡∏à Happy Oven", price: 62, category: "cakesBakeries", icon: "üòä" },
            { id: 33, name: "‡∏Ç‡∏ô‡∏°‡∏°‡∏á‡∏Ñ‡∏• Lucky Bakes", price: 78, category: "cakesBakeries", icon: "üßß" },
            { id: 34, name: "‡∏Ç‡∏ô‡∏°‡∏≠‡∏ö‡∏™‡∏î Fresh Bake", price: 58, category: "cakesBakeries", icon: "ü•ñ" },
            { id: 35, name: "‡∏≠‡∏ö‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô Warm & Fresh", price: 60, category: "cakesBakeries", icon: "ü•ê" },
            { id: 36, name: "‡∏´‡∏≠‡∏°‡∏Å‡∏£‡∏∏‡πà‡∏ô‡∏Ç‡∏ô‡∏° Fragrant Sweets", price: 65, category: "cakesBakeries", icon: "üç©" },
            { id: 37, name: "‡∏£‡∏™‡∏´‡∏ß‡∏≤‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏£‡∏≤ Sweet Taste Home", price: 55, category: "cakesBakeries", icon: "üè†" },
            { id: 38, name: "‡∏Ç‡∏ô‡∏°‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏Å‡∏•‡πâ Nearby Bakery", price: 50, category: "cakesBakeries", icon: "üè°" },

            // ‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤ (Pizza)
            { id: 9, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏°‡∏≤‡∏Å‡∏≤‡∏£‡∏¥‡∏ï‡πâ‡∏≤ (Margherita)", price: 180, category: "pizza", icon: "üçï" },
            { id: 10, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡πÄ‡∏õ‡∏õ‡πÄ‡∏õ‡∏≠‡πÇ‡∏£‡∏ô‡∏µ (Pepperoni)", price: 220, category: "pizza", icon: "üçï" },
            { id: 11, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏Æ‡∏≤‡∏ß‡∏≤‡∏¢‡πÄ‡∏≠‡∏µ‡πâ‡∏¢‡∏ô (Hawaiian)", price: 200, category: "pizza", icon: "üçï" },
            { id: 12, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏ã‡∏∏‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏î‡∏µ‡∏•‡∏±‡∏Å‡∏ã‡πå (Super Deluxe)", price: 250, category: "pizza", icon: "üçï" },
            { id: 13, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏û‡∏£‡∏¥‡∏Å‡∏´‡∏¢‡∏ß‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡πá‡∏î (Bell Pepper & Mushroom)", price: 190, category: "pizza", icon: "üçï" },
            { id: 14, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡πÑ‡∏™‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏¥‡∏ï‡∏≤‡πÄ‡∏•‡∏µ‡∏¢‡∏ô (Italian Sausage)", price: 230, category: "pizza", icon: "üçï" },
            { id: 15, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡∏£‡∏°‡∏Ñ‡∏ß‡∏±‡∏ô (Smoked Salmon)", price: 280, category: "pizza", icon: "üçï" },
            { id: 16, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏ä‡∏µ‡∏™‡∏£‡∏ß‡∏°‡∏°‡∏¥‡∏ï‡∏£ (Four Cheese)", price: 210, category: "pizza", icon: "üçï" },
            { id: 17, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß‡πÑ‡∏Å‡πà (BBQ Chicken)", price: 200, category: "pizza", icon: "üçï" },
            { id: 18, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏ó‡∏∞‡πÄ‡∏•‡∏£‡∏ß‡∏° (Seafood)", price: 270, category: "pizza", icon: "üçï" },
            { id: 19, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏ú‡∏±‡∏Å‡πÇ‡∏Ç‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏¥‡∏Ñ‡∏≠‡∏ï‡∏ï‡πâ‡∏≤ (Spinach & Ricotta)", price: 195, category: "pizza", icon: "üçï" },
            { id: 20, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡πÄ‡∏ö‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡πÑ‡∏Ç‡πà (Bacon & Egg)", price: 215, category: "pizza", icon: "üçï" },
            { id: 21, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏õ‡∏≤‡∏õ‡∏£‡∏¥‡∏Å‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡πÑ‡∏Å‡πà (Paprika & Chicken)", price: 205, category: "pizza", icon: "üçï" },
            { id: 22, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏£‡∏™‡∏à‡∏±‡∏î (Spicy Hot)", price: 190, category: "pizza", icon: "üçï" },
            { id: 23, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏°‡∏∞‡∏Å‡∏≠‡∏Å‡∏î‡∏≥‡∏Å‡∏±‡∏ö‡πÅ‡∏Æ‡∏° (Black Olive & Ham)", price: 200, category: "pizza", icon: "üçï" },
            { id: 105, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÑ‡∏°‡πâ", price: 220, category: "pizza", icon: "üçï" },

            // ‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ (Spaghetti)
            { id: 59, name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡∏Ñ‡∏≤‡πÇ‡∏ö‡∏ô‡∏≤‡∏£‡πà‡∏≤ (Carbonara)", price: 150, category: "spaghetti", icon: "üçù" },
            { id: 60, name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡πÇ‡∏ö‡πÇ‡∏•‡πÄ‡∏ô‡∏™ (Bolognese)", price: 140, category: "spaghetti", icon: "üçù" },
            { id: 61, name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡∏ú‡∏±‡∏î‡∏Ç‡∏µ‡πâ‡πÄ‡∏°‡∏≤‡∏ó‡∏∞‡πÄ‡∏• (Spicy Seafood)", price: 160, category: "spaghetti", icon: "üçù" },
            { id: 62, name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡πÄ‡∏ö‡∏Ñ‡∏≠‡∏ô‡∏û‡∏£‡∏¥‡∏Å‡πÅ‡∏´‡πâ‡∏á (Dried Chili Bacon)", price: 130, category: "spaghetti", icon: "üçù" },
            { id: 63, name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡∏ã‡∏≠‡∏™‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏® (Tomato Sauce)", price: 120, category: "spaghetti", icon: "üçù" },

            // ‡∏™‡πÄ‡∏ï‡πá‡∏Å (Steak)
            { id: 49, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢‡∏î‡∏≥ (Black Pepper Steak)", price: 180, category: "steak", icon: "ü•©" },
            { id: 50, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏ã‡∏≠‡∏™‡πÄ‡∏´‡πá‡∏î‡∏´‡∏≠‡∏° (Mushroom Sauce Steak)", price: 190, category: "steak", icon: "ü•©" },
            { id: 51, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏´‡∏°‡∏π‡∏à‡∏¥‡πâ‡∏°‡πÅ‡∏à‡πà‡∏ß (Spicy Thai Dipping Pork Steak)", price: 170, category: "steak", icon: "üçñ" },
            { id: 52, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡πÅ‡∏à‡πà‡∏ß (Thai Spicy Beef Steak)", price: 220, category: "steak", icon: "ü•©" },
            { id: 53, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÑ‡∏Å‡πà‡∏ã‡∏≠‡∏™‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢ (Garlic Pepper Chicken Steak)", price: 160, category: "steak", icon: "üçó" },
            { id: 54, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏´‡∏°‡∏π‡∏ã‡∏≠‡∏™‡πÄ‡∏ó‡∏≠‡∏£‡∏¥‡∏¢‡∏≤‡∏Å‡∏¥ (Teriyaki Pork Steak)", price: 175, category: "steak", icon: "üçñ" },
            { id: 55, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÅ‡∏ã‡πà‡∏ö (Zapp Steak ‚Äì ‡πÅ‡∏ô‡∏ß‡∏≠‡∏µ‡∏™‡∏≤‡∏ô‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏ô)", price: 185, category: "steak", icon: "üå∂Ô∏è" },
            { id: 56, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏õ‡∏•‡∏≤‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡∏¢‡πà‡∏≤‡∏á‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß (Grilled Salmon with Soy Glaze)", price: 250, category: "steak", icon: "üêü" },
            { id: 57, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏´‡∏°‡∏π‡∏û‡∏£‡∏¥‡∏Å‡πÄ‡∏Å‡∏•‡∏∑‡∏≠ (Spicy Pork Steak Thai Style)", price: 170, category: "steak", icon: "üå∂Ô∏è" },
            { id: 58, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÑ‡∏Å‡πà‡∏•‡∏≤‡∏ö (Larb Chicken Steak)", price: 165, category: "steak", icon: "üçó" },
            { id: 104, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÅ‡∏Ñ‡∏°‡∏õ‡πå‡πÑ‡∏ü‡∏£‡πå", price: 180, category: "steak", icon: "ü•©" },

            // ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢ (Thai Food)
            { id: 64, name: "‡∏ú‡∏±‡∏î‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡πÑ‡∏Å‡πà‡πÑ‡∏Ç‡πà‡∏î‡∏≤‡∏ß (Stir-fried Basil with Chicken & Fried Egg)", price: 80, category: "thaiFood", icon: "üçö" },
            { id: 65, name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏Å‡∏∏‡πâ‡∏á (Shrimp Fried Rice)", price: 90, category: "thaiFood", icon: "üç§" },
            { id: 66, name: "‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á‡∏ô‡πâ‡∏≥‡∏Ç‡πâ‡∏ô (Creamy Tom Yum Goong)", price: 120, category: "thaiFood", icon: "üç≤" },
            { id: 67, name: "‡πÅ‡∏Å‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏ß‡∏≤‡∏ô‡πÑ‡∏Å‡πà (Green Curry with Chicken)", price: 100, category: "thaiFood", icon: "üçõ" },
            { id: 68, name: "‡∏û‡∏∞‡πÅ‡∏ô‡∏á‡∏´‡∏°‡∏π (Panaeng Curry with Pork)", price: 110, category: "thaiFood", icon: "üçú" },
            { id: 69, name: "‡∏â‡∏π‡πà‡∏â‡∏µ‡πà‡∏õ‡∏•‡∏≤‡∏ó‡∏π (Chu Chee Mackerel)", price: 130, category: "thaiFood", icon: "üêü" },
            { id: 70, name: "‡πÅ‡∏Å‡∏á‡∏™‡πâ‡∏°‡∏Å‡∏∏‡πâ‡∏á‡∏ú‡∏±‡∏Å‡∏£‡∏ß‡∏° (Sour Curry with Shrimp & Mixed Veggies)", price: 120, category: "thaiFood", icon: "üå∂Ô∏è" },
            { id: 71, name: "‡∏™‡πâ‡∏°‡∏ï‡∏≥‡πÑ‡∏ó‡∏¢ (Papaya Salad Thai Style)", price: 70, category: "thaiFood", icon: "ü•ó" },
            { id: 72, name: "‡∏•‡∏≤‡∏ö‡∏´‡∏°‡∏π (Spicy Minced Pork Salad)", price: 90, category: "thaiFood", icon: "üå∂Ô∏è" },
            { id: 73, name: "‡∏ô‡πâ‡∏≥‡∏ï‡∏Å‡∏´‡∏°‡∏π (Spicy Grilled Pork Salad)", price: 95, category: "thaiFood", icon: "üçñ" },
            { id: 74, name: "‡πÑ‡∏Å‡πà‡∏¢‡πà‡∏≤‡∏á (Grilled Chicken)", price: 120, category: "thaiFood", icon: "üçó" },
            { id: 75, name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ã‡∏≠‡∏¢‡πÑ‡∏Å‡πà (Khao Soi with Chicken)", price: 100, category: "thaiFood", icon: "üçú" },
            { id: 76, name: "‡πÅ‡∏Å‡∏á‡∏Æ‡∏±‡∏á‡πÄ‡∏• (Hang Le Curry)", price: 110, category: "thaiFood", icon: "üç≤" },
            { id: 77, name: "‡πÑ‡∏™‡πâ‡∏≠‡∏±‡πà‡∏ß (Northern Thai Sausage)", price: 85, category: "thaiFood", icon: "üå≠" },
        ];


        const menuListEl = document.getElementById('menuList');
        const orderTableBody = document.querySelector('#orderTable tbody');
        const totalAmountEl = document.getElementById('totalAmount');
        const statusMsg = document.getElementById('statusMsg');
        const sendOrderBtn = document.getElementById('sendOrderBtn');
        const clearOrderBtn = document.getElementById('clearOrderBtn');
        const categoryBtns = document.querySelectorAll('.category-btn');
        const subCategoryDrink = document.getElementById('subCategoryDrink');
        const subCategoryDessert = document.getElementById('subCategoryDessert');
        const subCategoryMainDish = document.getElementById('subCategoryMainDish');
        const allSubCategoryDivs = document.querySelectorAll('#subCategoryDrink, #subCategoryDessert, #subCategoryMainDish');
        const currentTimeEl = document.getElementById('current-time');
        const eatHereRadio = document.getElementById('eatHere');
        const takeHomeRadio = document.getElementById('takeHome');
        const tableSelectContainer = document.getElementById('tableSelectContainer');
        const tableNumberSelect = document.getElementById('tableNumber');
        const receiptModal = new bootstrap.Modal(document.getElementById('receiptModal'));
        const receiptContentDiv = document.getElementById('receiptContent');
        const qrImageEl = document.getElementById('qrImage');
        const noMenuMsgEl = document.getElementById('noMenuMsg');


        let orders = JSON.parse(localStorage.getItem('cafeOrders')) || []; // ‡πÇ‡∏´‡∏•‡∏î orders ‡∏à‡∏≤‡∏Å localStorage

        // Function to get translation
        function getTranslation(key, placeholders = {}) {
            let text = translations[currentLang][key] || key; // Fallback to key if not found
            for (const p in placeholders) {
                text = text.replace(`{${p}}`, placeholders[p]);
            }
            return text;
        }

        // Function to show status message (Toast-like)
        function showStatusMessage(message, type = 'success') {
            statusMsg.textContent = message;
            statusMsg.className = `mt-3 alert alert-${type}`; // Use Bootstrap alert classes
            statusMsg.style.display = 'block';
            setTimeout(() => {
                statusMsg.style.display = 'none';
            }, 3000); // Hide message after 3 seconds
        }

        // Function to update UI elements based on current language
        function updateUIForLanguage() {
            document.getElementById('appTitle').textContent = getTranslation('appTitle');
            document.getElementById('menuHeader').textContent = getTranslation('menuHeader');
            document.getElementById('orderListHeader').textContent = getTranslation('orderListHeader');

            // Update main category buttons
            document.querySelector('.category-btn[data-category="all"]').textContent = getTranslation('allCategory');
            document.querySelector('.category-btn[data-category="drink"]').textContent = getTranslation('drinkCategory');
            document.querySelector('.category-btn[data-category="food"]').textContent = getTranslation('foodCategory');
            document.querySelector('.category-btn[data-category="dessert"]').textContent = getTranslation('dessertCategory');
            document.querySelector('.category-btn[data-category="mainDish"]').textContent = getTranslation('mainDishCategory');
            document.querySelector('.category-btn[data-category="game"]').textContent = getTranslation('gameCategory'); // New game category button

            // Update sub-category buttons
            document.querySelector('#subCategoryDrink .sub-category-btn[data-category="coffee"]').textContent = getTranslation('coffeeSubCategory');
            document.querySelector('#subCategoryDrink .sub-category-btn[data-category="tea"]').textContent = getTranslation('teaSubCategory');
            document.querySelector('#subCategoryDrink .sub-category-btn[data-category="juice"]').textContent = getTranslation('juiceSubCategory');
            document.querySelector('#subCategoryDrink .sub-category-btn[data-category="otherDrink"]').textContent = getTranslation('otherDrinkSubCategory');
            document.querySelector('#subCategoryDrink .sub-category-btn[data-category="alcohol"]').textContent = getTranslation('alcoholSubCategory');

            document.querySelector('#subCategoryDessert .sub-category-btn[data-category="cakesBakeries"]').textContent = getTranslation('cakesBakeriesSubCategory');
            document.querySelector('#subCategoryDessert .sub-category-btn[data-category="otherDessert"]').textContent = getTranslation('otherDessertSubCategory');

            document.querySelector('#subCategoryMainDish .sub-category-btn[data-category="pizza"]').textContent = getTranslation('pizzaSubCategory');
            document.querySelector('#subCategoryMainDish .sub-category-btn[data-category="spaghetti"]').textContent = getTranslation('spaghettiSubCategory');
            document.querySelector('#subCategoryMainDish .sub-category-btn[data-category="steak"]').textContent = getTranslation('steakSubCategory');
            document.querySelector('#subCategoryMainDish .sub-category-btn[data-category="thaiFood"]').textContent = getTranslation('thaiFoodSubCategory');

            document.getElementById('colMenuName').textContent = getTranslation('menuNameCol');
            document.getElementById('colPrice').textContent = getTranslation('priceCol');
            document.getElementById('colQty').textContent = getTranslation('qtyCol');
            document.getElementById('colTotal').textContent = getTranslation('totalCol');
            document.getElementById('colManage').textContent = getTranslation('manageCol');
            document.getElementById('totalAmountLabel').textContent = getTranslation('grandTotal');
            document.getElementById('orderTypeHeader').textContent = getTranslation('orderTypeLabel');
            document.getElementById('orderTypeLabel').textContent = getTranslation('orderTypeLabel');
            document.getElementById('eatHereLabel').textContent = getTranslation('eatHere');
            document.getElementById('takeHomeLabel').textContent = getTranslation('takeHome');
            document.getElementById('tableSelectLabel').textContent = getTranslation('tableSelectLabel');

            // Update table number options
            document.getElementById('tableNumber').options[0].textContent = getTranslation('table1');
            document.getElementById('tableNumber').options[1].textContent = getTranslation('table2');
            document.getElementById('tableNumber').options[2].textContent = getTranslation('table3');
            document.getElementById('tableNumber').options[3].textContent = getTranslation('table4');


            document.getElementById('clearOrderBtnText').textContent = getTranslation('clearOrderBtn');
            document.getElementById('sendOrderBtnText').textContent = getTranslation('sendOrderBtn');
            document.getElementById('receiptModalTitle').textContent = getTranslation('modalReceiptTitle');
            document.getElementById('cafeNameReceipt').textContent = getTranslation('cafeNameReceipt'); // For the receipt header
            document.getElementById('printReceiptBtnText').textContent = getTranslation('printReceiptBtn');
            document.getElementById('closeBtnText').textContent = getTranslation('closeBtn');
            document.getElementById('noMenuMsg').textContent = getTranslation('noMenuInCategory');
            document.getElementById('thankYouMessage').textContent = getTranslation('thankYou');


            filterMenuItems(currentActiveCategory, currentActiveSubCategory); // Re-render menu items with new language
            renderOrderList(); // Re-render order list with new language
        }

        function switchLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('cafeLanguage', lang); // Save language preference
            updateUIForLanguage();
        }

        // Function to update current time
        function updateCurrentTime() {
            const now = new Date();
            const options = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            };
            currentTimeEl.textContent = now.toLocaleDateString(currentLang === 'th' ? 'th-TH' : 'en-US', options);
        }

        function renderMenuItems(category, subCategory = 'all') {
            menuListEl.innerHTML = '';
            noMenuMsgEl.style.display = 'none';

            let filteredItems = menuItems.filter(item => {
                if (category === 'all') {
                    return true;
                } else if (category === 'drink') {
                    return item.category === 'coffee' || item.category === 'tea' || item.category === 'juice' || item.category === 'otherDrink' || item.category === 'alcohol';
                } else if (category === 'dessert') {
                    return item.category === 'cakesBakeries' || item.category === 'otherDessert';
                } else if (category === 'mainDish') {
                    return item.category === 'pizza' || item.category === 'spaghetti' || item.category === 'steak' || item.category === 'thaiFood';
                } else if (category === 'food') { // Handle 'food' category explicitly
                    return item.category === 'food';
                } else if (category === 'game') {
                    return item.category === 'game';
                }
                return false;
            });

            // Further filter by subCategory if applicable
            if (subCategory !== 'all' && (category === 'drink' || category === 'dessert' || category === 'mainDish')) {
                filteredItems = filteredItems.filter(item => item.category === subCategory);
            } else if (subCategory !== 'all' && (category === 'all' || category === 'food' || category === 'game')) {
                // If a subcategory is selected, but the main category is 'all', 'food' or 'game', show only items matching the subcategory directly.
                // This might be redundant if subcategories are only shown when main categories are selected, but good for robustness.
                filteredItems = filteredItems.filter(item => item.category === subCategory);
            }


            if (filteredItems.length === 0) {
                noMenuMsgEl.style.display = 'block';
            } else {
                filteredItems.forEach(item => {
                    const menuItemDiv = document.createElement('div');
                    menuItemDiv.classList.add('list-group-item', 'menu-item');

                    if (item.isGame) {
                        menuItemDiv.innerHTML = `
                            <span class="menu-name">${item.icon} ${item.name}</span>
                            <button class="btn btn-sm btn-info ms-2" onclick="playGame('${item.gameUrl}')">${getTranslation('game')}</button>
                        `;
                    } else {
                        menuItemDiv.innerHTML = `
                            <span class="menu-name">${item.icon} ${item.name}</span>
                            <span class="menu-price">${item.price} ${getTranslation('‡∏ö‡∏≤‡∏ó')}</span>
                        `;
                        menuItemDiv.onclick = () => addOrder(item);
                    }
                    menuListEl.appendChild(menuItemDiv);
                });
            }
        }

        function playGame(url) {
            window.open(url, '_blank');
        }

        function addOrder(item) {
            const existingOrder = orders.find(order => order.id === item.id);
            if (existingOrder) {
                existingOrder.qty++;
            } else {
                orders.push({ ...item, qty: 1 });
            }
            saveOrders(); // Save to localStorage
            renderOrderList();
            showStatusMessage(getTranslation('addToOrderSuccess', { itemName: item.name }), 'success');
        }

        function removeOrder(id) {
            const index = orders.findIndex(order => order.id === id);
            if (index !== -1) {
                const itemName = orders[index].name;
                orders.splice(index, 1);
                saveOrders(); // Save to localStorage
                renderOrderList();
                showStatusMessage(getTranslation('removeFromOrderSuccess', { itemName: itemName }), 'warning');
            }
        }

        function updateQuantity(id, change) {
            const order = orders.find(order => order.id === id);
            if (order) {
                order.qty += change;
                if (order.qty <= 0) {
                    removeOrder(id);
                } else {
                    saveOrders(); // Save to localStorage
                    renderOrderList();
                }
            }
        }

        function renderOrderList() {
            orderTableBody.innerHTML = '';
            let totalAmount = 0;

            orders.forEach(order => {
                const row = orderTableBody.insertRow();
                row.insertCell().textContent = `${order.icon} ${order.name}`;
                row.insertCell().textContent = order.price;
                row.insertCell().innerHTML = `
                    <div class="d-flex align-items-center">
                        <button class="btn btn-sm btn-outline-secondary me-1" onclick="updateQuantity(${order.id}, -1)">-</button>
                        <span>${order.qty}</span>
                        <button class="btn btn-sm btn-outline-secondary ms-1" onclick="updateQuantity(${order.id}, 1)">+</button>
                    </div>
                `;
                const itemTotal = order.price * order.qty;
                row.insertCell().textContent = itemTotal;
                row.insertCell().innerHTML = `
                    <button class="btn btn-sm btn-danger" onclick="removeOrder(${order.id})"><i class="bi bi-x"></i></button>
                `;
                totalAmount += itemTotal;
            });

            totalAmountEl.textContent = `${totalAmount} ${getTranslation('‡∏ö‡∏≤‡∏ó')}`;
        }

        function clearOrder() {
            if (confirm(getTranslation('clearOrderConfirm'))) {
                orders = [];
                saveOrders(); // Save to localStorage
                renderOrderList();
                showStatusMessage(getTranslation('orderCleared'), 'info');
            }
        }

        async function sendOrder() {
            if (orders.length === 0) {
                showStatusMessage(getTranslation('noItemsSelected'), 'warning');
                return;
            }

            showStatusMessage(getTranslation('sendingOrder'), 'info');
            sendOrderBtn.disabled = true;

            const orderType = document.querySelector('input[name="orderType"]:checked').value;
            const tableNumber = orderType === 'eatHere' ? tableNumberSelect.value : 'N/A';

            const orderData = {
                orderTime: new Date().toLocaleString(),
                orderType: orderType,
                tableNumber: tableNumber,
                items: orders.map(item => ({
                    id: item.id,
                    name: item.name,
                    qty: item.qty,
                    price: item.price,
                    total: item.qty * item.price
                })),
                totalAmount: orders.reduce((sum, item) => sum + (item.qty * item.price), 0)
            };

            try {
                // Simulate sending data to Google Apps Script or a backend
                // Replace with your actual Google Apps Script URL if used
                // const scriptUrl = 'YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL';
                // const response = await fetch(scriptUrl, {
                //     method: 'POST',
                //     mode: 'no-cors', // Required for simple requests without preflight
                //     headers: {
                //         'Content-Type': 'application/json',
                //     },
                //     body: JSON.stringify(orderData)
                // });

                // Simulate success
                await new Promise(resolve => setTimeout(resolve, 1500));
                showStatusMessage(getTranslation('orderSuccess'), 'success');

                displayReceipt(orderData);
                receiptModal.show(); // Show receipt modal on success

                orders = []; // Clear orders after successful send
                saveOrders(); // Save empty orders to localStorage
                renderOrderList();
            } catch (error) {
                console.error('Error sending order:', error);
                showStatusMessage(getTranslation('orderFailed', { errorMessage: error.message }), 'danger');
            } finally {
                sendOrderBtn.disabled = false;
            }
        }

        function displayReceipt(orderData) {
            let receiptHtml = `
                <p><strong>${getTranslation('receiptOrderType')}:</strong> ${getTranslation(orderData.orderType)}</p>
            `;
            if (orderData.orderType === 'eatHere') {
                receiptHtml += `<p><strong>${getTranslation('receiptTableNumber')}:</strong> ${getTranslation(orderData.tableNumber)}</p>`;
            }
            receiptHtml += `
                <p><strong>${getTranslation('receiptTime')}:</strong> ${orderData.orderTime}</p>
                <hr>
                <table class="table table-sm table-borderless">
                    <thead>
                        <tr>
                            <th>${getTranslation('item')}</th>
                            <th class="text-end">${getTranslation('qty')}</th>
                            <th class="text-end">${getTranslation('total')}</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            orderData.items.forEach(item => {
                receiptHtml += `
                    <tr>
                        <td>${item.icon || ''} ${item.name}</td>
                        <td class="text-end">${item.qty}</td>
                        <td class="text-end">${item.total} ${getTranslation('‡∏ö‡∏≤‡∏ó')}</td>
                    </tr>
                `;
            });

            receiptHtml += `
                    </tbody>
                    <tfoot>
                        <tr>
                            <th colspan="2" class="text-end">${getTranslation('grandTotalReceipt')}:</th>
                            <th class="text-end">${orderData.totalAmount} ${getTranslation('‡∏ö‡∏≤‡∏ó')}</th>
                        </tr>
                    </tfoot>
                </table>
            `;
            receiptDetails.innerHTML = receiptHtml;

            // Generate QR Code for payment (example: PromptPay QR)
            const paymentDetails = `Amount: ${orderData.totalAmount} ${getTranslation('‡∏ö‡∏≤‡∏ó')}`;
            const qrData = `https://promptpay.io/QR/YOUR_PROMPTPAY_ID/${orderData.totalAmount}`; // Replace with actual PromptPay ID or payment link
            qrImageEl.src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(qrData)}`;
        }


        function printReceipt() {
            const printContents = receiptContentDiv.innerHTML;
            const originalContents = document.body.innerHTML;

            document.body.innerHTML = printContents;
            window.print();
            document.body.innerHTML = originalContents;
            location.reload(); // Reload to restore original page and scripts
        }


        function saveOrders() {
            localStorage.setItem('cafeOrders', JSON.stringify(orders));
        }

        function filterMenuItems(category, subCategory = 'all') {
            currentActiveCategory = category;
            currentActiveSubCategory = subCategory; // Store active sub-category

            localStorage.setItem('cafeActiveCategory', category);
            localStorage.setItem('cafeActiveSubCategory', subCategory);


            // Hide all sub-category divs first
            allSubCategoryDivs.forEach(div => div.classList.add('d-none'));

            // Show relevant sub-category div
            if (category === 'drink') {
                subCategoryDrink.classList.remove('d-none');
            } else if (category === 'dessert') {
                subCategoryDessert.classList.remove('d-none');
            } else if (category === 'mainDish') {
                subCategoryMainDish.classList.remove('d-none');
            }

            // Remove 'active' from all category and sub-category buttons
            document.querySelectorAll('.category-btn, .sub-category-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Add 'active' to the clicked main category button
            document.querySelector(`.category-btn[data-category="${category}"]`).classList.add('active');

            // Add 'active' to the clicked sub-category button if applicable
            if (subCategory !== 'all' && (category === 'drink' || category === 'dessert' || category === 'mainDish')) {
                const activeSubBtn = document.querySelector(`#subCategory${category.charAt(0).toUpperCase() + category.slice(1)} .sub-category-btn[data-category="${subCategory}"]`);
                if (activeSubBtn) {
                    activeSubBtn.classList.add('active');
                }
            }


            renderMenuItems(category, subCategory);
        }

        // Event Listeners
        categoryBtns.forEach(button => {
            button.addEventListener('click', () => {
                const category = button.dataset.category;
                filterMenuItems(category, 'all'); // When main category is clicked, reset sub-category to 'all'
            });
        });

        document.querySelectorAll('.sub-category-btn').forEach(button => {
            button.addEventListener('click', () => {
                const subCategory = button.dataset.category;
                // Determine the parent main category based on which sub-category div it belongs to
                let parentCategory;
                if (button.closest('#subCategoryDrink')) parentCategory = 'drink';
                else if (button.closest('#subCategoryDessert')) parentCategory = 'dessert';
                else if (button.closest('#subCategoryMainDish')) parentCategory = 'mainDish';

                filterMenuItems(parentCategory, subCategory);
            });
        });

        clearOrderBtn.addEventListener('click', clearOrder);
        sendOrderBtn.addEventListener('click', sendOrder);

        eatHereRadio.addEventListener('change', () => {
            tableSelectContainer.style.display = eatHereRadio.checked ? 'block' : 'none';
        });

        takeHomeRadio.addEventListener('change', () => {
            tableSelectContainer.style.display = takeHomeRadio.checked ? 'none' : 'block';
        });

        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
            themeToggle.innerHTML = isDarkMode ? '<i class="bi bi-sun-fill"></i>' : '<i class="bi bi-moon-stars-fill"></i>';
        });

        // Initial theme load
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            themeToggle.innerHTML = '<i class="bi bi-sun-fill"></i>';
        } else {
            document.body.classList.remove('dark-mode');
            themeToggle.innerHTML = '<i class="bi bi-moon-stars-fill"></i>';
        }

        // Initial load
        document.addEventListener('DOMContentLoaded', () => {
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000); // Update time every second

            updateUIForLanguage(); // Apply translations on load
            renderOrderList(); // Render orders from localStorage

            // Set initial radio button state and table select visibility
            if (eatHereRadio.checked) {
                tableSelectContainer.style.display = 'block';
            } else {
                tableSelectContainer.style.display = 'none';
            }
            // Ensure the correct category is active on load
            filterMenuItems(currentActiveCategory, currentActiveSubCategory);
        });
    </script>
</body>
</html>
